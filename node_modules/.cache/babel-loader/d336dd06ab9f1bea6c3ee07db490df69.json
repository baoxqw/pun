{"remainingRequest":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/babel-loader/lib/index.js!/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/src/views/indicators/statements/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/src/views/indicators/statements/index.vue","mtime":1652174136456},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"index\",\n  data: function data() {\n    return {\n      data: [{\n        id: 1,\n        label: \"一级 1\",\n        children: [{\n          id: 4,\n          label: \"二级 1-1\",\n          children: [{\n            id: 9,\n            label: \"三级 1-1-1\"\n          }, {\n            id: 10,\n            label: \"三级 1-1-2\"\n          }]\n        }]\n      }, {\n        id: 2,\n        label: \"一级 2\",\n        children: [{\n          id: 5,\n          label: \"二级 2-1\"\n        }, {\n          id: 6,\n          label: \"二级 2-2\"\n        }]\n      }, {\n        id: 3,\n        label: \"一级 3\",\n        children: [{\n          id: 7,\n          label: \"二级 3-1\"\n        }, {\n          id: 8,\n          label: \"二级 3-2\",\n          children: [{\n            id: 11,\n            label: \"三级 3-2-1\"\n          }, {\n            id: 12,\n            label: \"三级 3-2-2\"\n          }, {\n            id: 13,\n            label: \"三级 3-2-3\"\n          }]\n        }]\n      }],\n      isEditHeader: false,\n      isUpdate: true,\n      isEdit: true,\n      propArr: [],\n      // 生成dynamicColumns时的记录\n      dynamicColumns: [],\n      // 存放动态生成列\n      tableData: [{\n        date: \"2016-05-02\",\n        name: \"王小虎1\",\n        address: \"上海市普陀区金沙江路 1518 弄\",\n        isEditor: false,\n        custom: \"\"\n      }, {\n        date: \"2016-05-04\",\n        name: \"王小红\",\n        address: \"上海市普陀区金沙江路 1517 弄\",\n        isEditor: false,\n        custom: \"\"\n      }, {\n        date: \"2016-05-01\",\n        name: \"王小翠\",\n        address: \"上海市普陀区金沙江路 1519 弄\",\n        isEditor: false,\n        custom: \"\"\n      }, {\n        date: \"2016-05-03\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1516 弄\",\n        isEditor: false,\n        custom: \"\"\n      }],\n      rightList: [],\n      addressDrag: {},\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      }\n    };\n  },\n  created: function created() {\n    this.initTable();\n  },\n  methods: {\n    initTable: function initTable() {\n      var _this = this;\n\n      this.tableData.forEach(function (item) {\n        if (item.custom) {\n          item.custom = JSON.parse(item.custom);\n          console.log('---99', item.custom);\n          Object.keys(item.custom).forEach(function (key) {\n            if (_this.propArr.indexOf(key) === -1) {\n              _this.propArr.push(key);\n\n              _this.dynamicColumns.push({\n                prop: key,\n                label: key\n              });\n            }\n          });\n        } else {\n          item.custom = {};\n        }\n      });\n    },\n    edit: function edit(row, index) {\n      if (this.isUpdate) {\n        row.isEditor = true;\n        this.addressDrag = {};\n        this.isUpdate = false;\n      }\n    },\n    save: function save(row, index) {\n      if (!this.isUpdate) {\n        this.isUpdate = true;\n        row.isEditor = false;\n        row.address = this.addressDrag.label;\n      }\n    },\n    cancel: function cancel(row, index) {\n      if (!this.isUpdate) {\n        this.isUpdate = true;\n        row.isEditor = false;\n      }\n    },\n    handleDragStart: function handleDragStart(node, ev) {\n      ev.dataTransfer.setData(\"item\", JSON.stringify(node.data));\n    },\n    allowDrop: function allowDrop(draggingNode, dropNode, type) {\n      return false;\n    },\n    allowDrag: function allowDrag(draggingNode) {\n      return true;\n    },\n    drop: function drop(event) {\n      var data = event.dataTransfer.getData(\"item\");\n      this.rightList.push(JSON.parse(data));\n      this.addressDrag = JSON.parse(data);\n      console.log('this.rightList:', this.rightList);\n    },\n    addColumn: function addColumn() {\n      var _this2 = this;\n\n      this.$prompt(\"请输入列名\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      }).then(function (_ref) {\n        var value = _ref.value;\n        _this2.isEdit = true;\n\n        _this2.dynamicColumns.push({\n          prop: value,\n          label: value\n        });\n      });\n    },\n    deleteColunm: function deleteColunm(index) {\n      this.dynamicColumns.splice(index, 1);\n    },\n    submit: function submit() {\n      var _this3 = this;\n\n      var arr = [];\n      this.tableData.forEach(function (data) {\n        var temp = {};\n        temp.name = data.name;\n        var obj = {};\n\n        _this3.dynamicColumns.forEach(function (col) {\n          // 仅把有效的列提交\n          if (data.custom[col.prop]) {\n            obj[col.prop] = data.custom[col.prop];\n          }\n        });\n\n        if (JSON.stringify(obj) !== \"{}\") {\n          temp.custom = JSON.stringify(obj);\n        }\n\n        arr.push(temp);\n      });\n      this.isEdit = false;\n      console.log('--this.tableData-', this.tableData);\n      console.log('--this.dynamicColumns-', this.dynamicColumns);\n    }\n  }\n};",null]}