{"remainingRequest":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/src/views/indicators/batch/batchAndAtom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/src/views/indicators/batch/batchAndAtom.vue","mtime":1646816096000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuqianwen/Desktop/computer/农商/poc原项目/poc 2/Pncui-Indicator/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import batchAndAtomRelation,{getSelectedListBybatchCode} from '@/api/indicators/batchAndAtomRelation.js'\n  import CRUD, { presenter, header, form, crud } from '@crud/crud'\n  import rrOperation from '@crud/RR.operation'\n  import crudOperation from '@crud/CRUD.operation'\n  import udOperation from '@crud/UD.operation'\n  import pagination from '@crud/Pagination'\n  import {getData2Api} from '@/api/indicators/indIndicatorManual'\n  import Treeselect from '@riophae/vue-treeselect'\n  import '@riophae/vue-treeselect/dist/vue-treeselect.css'\n  // crud交由presenter持有\n  const defaultCrud = CRUD({ title: '指标授权', url: batchAndAtomRelation.url, sort: 'id,desc', crudMethod: { ...batchAndAtomRelation.crud }})\n  const defaultForm = {\n    batchCode: null,\n    bizName: null,\n    bizCode: null}\n    const bizNames={}\n    const depts={}\n  export default {\n    name: 'batchAndAtomRelation',\n    props:[\"msg\"],\n    components: { Treeselect,pagination, crudOperation, rrOperation, udOperation },\n    mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n    dicts: ['IND_CURRENCY', 'IE_FREQUENCY'],\n\n    data() {\n      return {\n        bizNames,\n        permission: {\n          add: ['admin', 'resultCheck:add'],\n          edit: ['admin', 'resultCheck:edit'],\n          del: ['admin', 'resultCheck:del']\n        },\n          atomList:[],\n          rules: {\n/*           atomList: [\n            { type:'array' , required: true, message: '请选择一个指标', trigger: 'blur' }\n          ],*/\n        },\n        options: [],\n      }\n    },\n    created() {\n     this.form.batchCode = this.msg\n        getSelectedListBybatchCode(this.form.batchCode).then(data => {\n            this.atomList = data;\n        })\n    },\n    mounted() {\n      getData2Api().then(data => {\n        this.bizNames = data;\n        this.options = data;\n      })\n\n    },\n    methods: {\n      // 获取数据前设置好接口地址\n      [CRUD.HOOK.beforeRefresh]() {\n        this.query.batchCode = this.msg\n        this.crud.optShow.del = true\n        this.crud.optShow.add = true\n        this.crud.optShow.edit = false\n        return true\n      },\n      [CRUD.HOOK.beforeToAdd](){\n        this.form.batchCode = this.msg\n        getSelectedListBybatchCode(this.form.batchCode).then(data => {\n            console.log(data);\n            this.atomList = data;\n        })\n      },\n      [CRUD.HOOK.beforeSubmit]() {\n          if(this.atomList.length==0){\n              this.$message.error({\n                  message: \"请选择一个指标\"\n              })\n              return false;\n          }\n          this.form.bizCode = this.atomList.toString();\n          //this.form.bizName = this.form.bizName == null? null : Array.isArray(this.form.bizName)? this.form.bizName.join(\",\") : this.form.bizName\n      },\n      [CRUD.HOOK.afterSubmit](){\n        \n      },\n      forceUpdate(e){\n        this.$forceUpdate(); //\n      },\n      closeDialog(){\n        this.interfaceDialog = false;\n\n      },\n\n    }\n  }\n",null]}