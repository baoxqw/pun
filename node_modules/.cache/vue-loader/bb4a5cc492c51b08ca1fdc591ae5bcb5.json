{"remainingRequest":"D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\src\\views\\indicators\\manual\\indSupplementaryReview.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\src\\views\\indicators\\manual\\indSupplementaryReview.vue","mtime":1643178817687},{"path":"D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\苏州指标\\苏州指标indicator\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport crudIndSupplementaryReview,{toApprove} from '../../../api/indicators/indSupplementaryReview'\nimport {findIndByApproveId} from '../../../api/indicators/indIndicatorManual'\nimport CRUD, { presenter, header, form, crud } from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport udOperation from '@crud/UD.operation'\nimport pagination from '@crud/Pagination'\n\n// crud交由presenter持有\nconst defaultCrud = CRUD({ title: '补录审核', url: crudIndSupplementaryReview.url, sort: 'id,desc', crudMethod: { ...crudIndSupplementaryReview.crud }})\nconst defaultForm = { id: null, supplementaryDescribe: null,approveStatus:null, supplementaryId: null,infoId:null, crtUserCode: null, crtOrgCode: null, crtDate: null, updUserCode: null, updOrgCode: null, inputdate: null, updDate: null }\nconst detailData=[]\nexport default {\n  name: 'IndSupplementaryReview',\n  components: { pagination, crudOperation, rrOperation, udOperation },\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n  dicts: ['RETENTION', 'IE_TYPE', 'IE_STATUS', 'IND_CURRENCY', 'IND_FIRST_TYPE','BUSSINESS_DEPT','IE_FREQUENCY','IND_APPROVE_STATUS','BE_APPROVE_STATUS'],\n  data() {\n    return {\n      approvedDialog:false,\n      DetailDialog:false,\n      loading:true,\n      ids:null,\n      infoIds:null,\n      detailData,\n      permission: {\n        add: ['admin', 'indSupplementaryReview:add'],\n        edit: ['admin', 'indSupplementaryReview:edit'],\n        del: ['admin', 'indSupplementaryReview:del']\n      },\n      options: [{\n        value: '2',\n        label: '同意'\n      }, {\n        value: '3',\n        label: '驳回'\n      }],\n      rules: {\n        id: [\n          { required: true, message: 'ID不能为空', trigger: 'blur' }\n        ]\n      }    }\n  },\n  created() {\n    this.resetQuery()\n  },\n  methods: {\n    resetQuery(){\n      this.crud.resetQuery(false);\n      this.crud.refresh()\n    },\n    // 获取数据前设置好接口地址\n    [CRUD.HOOK.beforeRefresh]() {\n      this.crud.optShow.del = false\n      this.crud.optShow.add = false\n      return true\n    },\n    Approved(data){\n        console.log(data);\n        if(Object.keys(data).length == 0){\n          this.$message({\n            message: '请先选择一条记录',\n            type: 'warning'\n          });\n        }else {\n          this.approvedDialog = true,\n          this.ids=data[0].id\n          this.infoIds=data[0].infoId\n        }\n    },\n    closeApprovedDialog(){\n      this.approvedDialog = false\n      this.form.approveStatus=\"\"\n      this.ids=\"\"\n      this.infoIds=\"\"\n    },\n    closeDetailDialog(){\n      this.DetailDialog = false\n      this.loading = true\n\n    },\n    showDetail(data){\n      this.DetailDialog = true\n      var approveId = data[0].id\n      findIndByApproveId(approveId).then(data => {\n            console.log(data)\n        this.detailData = data\n        this.loading = false\n      })\n    },\n    submit(){\n      toApprove(this.ids,this.infoIds,this.form.approveStatus).then(data =>{\n        if(data.msg ==\"成功\"||data.msg ==\"操作成功\"){\n          this.$message.success({\n            message: '操作成功!'\n          })\n          this.closeApprovedDialog();\n          this.crud.toQuery();\n        }else{\n          this.$message.error({\n            message: data.msg\n          })\n        }\n      })\n    }\n  }\n}\n",null]}