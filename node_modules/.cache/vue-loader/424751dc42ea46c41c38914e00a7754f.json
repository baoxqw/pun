{"remainingRequest":"D:\\GienProject\\poc\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GienProject\\poc\\Pncui-Indicator\\src\\views\\indicators\\batch\\catalogue.vue?vue&type=template&id=a1f855ba&scoped=true&","dependencies":[{"path":"D:\\GienProject\\poc\\Pncui-Indicator\\src\\views\\indicators\\batch\\catalogue.vue","mtime":1646964811392},{"path":"D:\\GienProject\\poc\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GienProject\\poc\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\GienProject\\poc\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GienProject\\poc\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"app-container\">\n  <!--工具栏-->\n  <div class=\"head-container\">\n    <!-- 搜索 -->\n    <div>\n      <el-input v-model=\"query.tabName\" clearable size=\"small\" placeholder=\"表名称123\" style=\"width: 200px;\"\n        class=\"filter-item\" />\n      <el-input v-model=\"query.tabNameCn\" clearable size=\"small\" placeholder=\"表中文名\" style=\"width: 200px;\"\n        class=\"filter-item\" />\n      <!-- <el-select clearable size=\"small\" class=\"filter-item\" clearable v-model=\"query.createBy\" placeholder=\"创建人\">\n        <el-option v-for=\"peo in peopleOptions\" :key=\"peo.userId\" :label=\"peo.nickName\" :value=\"peo.userId\" />\n      </el-select> -->\n      <el-button class=\"filter-item\" type=\"success\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\n      <el-button class=\"filter-item\" type=\"success\" icon=\"el-icon-refresh-left\" @click=\"resetQuery(getList)\">重置\n      </el-button>\n    </div>\n    <!-- 新增工具栏 -->\n    <span class=\"crud-opts-left\">\n      <slot name=\"left\" />\n      <el-button class=\"filter-item\" type=\"primary\" @click=\"handleAdd\">\n        创建数据模型\n      </el-button>\n      <el-upload slot=\"right\" ref=\"upload\" class=\"upload-demo inline-block \" :show-file-list=\"false\"\n        action=\"importData\" accept=\".xlsx,.xls\" :before-upload=\"beforeUpload\" :on-success=\"handleSuccess\"\n        :http-request=\"uploadFile\" multiple :limit=\"1\">\n        <el-button class=\"el-upload\" size=\"mini\" type=\"primary\" slot=\"trigger\">导入</el-button>\n\n        <!-- <el-button class=\"el-upload\" size=\"mini\" type=\"primary\" @click=\"doExport('download','补录数据')\">导出</el-button> -->\n        <el-button class=\"el-upload\" size=\"mini\" type=\"primary\" @click=\"downloadTemplate\">下载Excel模板</el-button>\n      </el-upload>\n    </span>\n  </div>\n\n  <!--表格渲染-->\n  <el-table ref=\"table\" v-loading=\"loading\" :data=\"componentList\" size=\"small\">\n    <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n    <el-table-column label=\"数据表名\" align=\"center\" prop=\"tabName\" />\n    <!-- <el-table-column label=\"表名称\" align=\"center\" prop=\"tabName\" /> -->\n    <el-table-column label=\"数据模型名称\" align=\"center\" prop=\"tabNameCn\" />\n    <el-table-column label=\"模型目录\" align=\"center\" prop=\"modelLvl\" />\n    <!-- <el-table-column label=\"数据表用途\" align=\"center\" prop=\"tabTodo\" />\n    <el-table-column label=\"更新频率\" align=\"center\" prop=\"dataUpdFrequency\" />\n    <el-table-column label=\"更新时间\" align=\"center\" prop=\"dataUpdTime\" /> -->\n    <!-- <el-table-column label=\"数据库类型\" align=\"center\" prop=\"tableType\" /> -->\n    <el-table-column label=\"创建人\" align=\"center\" prop=\"createBy\" />\n    <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" />\n    <el-table-column label=\"操作\" width=\"300px\" fixed=\"right\">\n      <template slot-scope=\"scope\">\n        <el-button size=\"mini\" type=\"text\" icon=\"el-icon-view\" @click=\"SQLPreview(scope.row)\">\n          SQL预览\n        </el-button>\n        <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\">编辑</el-button>\n        <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleExport(scope.row)\">导出</el-button>\n        <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\">删除</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n\n  <!--分页组件-->\n  <el-pagination :background=\"background\" :current-page=\"pageNum\" :page-size=\"pageSize\" :layout=\"layout\"\n    :page-sizes=\"[10, 20, 30, 50]\" :total=\"total\" v-bind=\"$attrs\" @size-change=\"handleSizeChange\"\n    @current-change=\"handleCurrentChange\" />\n\n  <!-- 创建模型对话框 -->\n  <el-dialog :close-on-click-modal=\"false\" @close=\"cancel\" :title=\"title\" width=\"80%\" :visible=\"open\" class=\"dialog\n  \">\n    <el-tabs v-model=\"activeName\" type=\"border-card\" @tab-click=\"handleClick\">\n      <el-tab-pane label=\"数据模型基本信息\" name=\"first\">\n        <el-form label-suffix=\":\" class=\"pane\" ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"128px\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n              <el-form-item label=\"数据源\" prop=\"tableRegionalBut\">\n                <el-radio-group v-model=\"form.tableRegionalBut\" size=\"small\">\n                  <el-radio v-for=\"dict in dbTypeOptions\" :key=\"dict.dictLabel\" :label=\"dict.dictLabel\">\n                    {{ dict.dictLabel }}</el-radio>\n                </el-radio-group>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <!-- <el-row v-if=\"form.dbType === 'HIVE'\" :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"表分区键\" prop=\"tableRegionalBut\">\n                <el-input clearable size=\"small\" v-model=\"form.tableRegionalBut\" placeholder=\"请输入表分区键\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"分区键类型\" prop=\"regionalType\">\n                <el-input clearable size=\"small\" v-model=\"form.regionalType\" placeholder=\"请输入分区键类型\" />\n              </el-form-item>\n            </el-col>\n          </el-row> -->\n          <!-- <el-row v-if=\"form.dbType === 'HIVE'\" :gutter=\"20\">\n            <el-col :span=\"24\">\n              <el-form-item label=\"location\" prop=\"location\">\n                <el-input clearable size=\"small\" v-model=\"form.location\" placeholder=\"请输入location\" />\n              </el-form-item>\n            </el-col>\n          </el-row> -->\n          <el-row style=\"padding-top: 20px\" :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"SCHEMA\" prop=\"regionalType\">\n                <el-select class=\"block\" v-model=\"form.regionalType\" filterable clearable size=\"small\"\n                  @change=\"changeDatabases\" placeholder=\"SCHEMA\">\n                  <el-option v-for=\"item in regionalType\" :key=\"item.label\" :label=\"item.label\" :value=\"item.label\">\n                  </el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"数据表名\" prop=\"tabName\">\n                <el-select class=\"block\" v-model=\"form.tabName\" filterable clearable size=\"small\"\n                  @change=\"changeTableNames\" placeholder=\"数据表名\">\n                  <el-option v-for=\"item in tabName\" :key=\"item.label\" :label=\"item.label\" :value=\"item.label\">\n                  </el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row style=\"padding-top: 20px\" :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"数据模型名称\" prop=\"tabNameCn\">\n                <el-input clearable size=\"small\" v-model=\"form.tabNameCn\" placeholder=\"数据模型名称\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"模型目录\" prop=\"modelLvl\">\n                <el-select class=\"block\" v-model=\"form.modelLvl\" filterable clearable size=\"small\" placeholder=\"模型目录\">\n                  <el-option v-for=\"dict in modelLvlOptions\" :key=\"dict.dictValue\" :label=\"dict.dictLabel\"\n                    :value=\"dict.dictValue\"></el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <!-- <el-col :span=\"12\">\n              <el-form-item label=\"表名称\" prop=\"tabName\">\n                <el-input clearable size=\"small\" v-model=\"form.tabName\" placeholder=\"表名称\" />\n              </el-form-item>\n            </el-col> -->\n          </el-row>\n          <!-- <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"模型目录\" prop=\"modelLvl\">\n                <el-select class=\"block\" v-model=\"form.modelLvl\" filterable clearable size=\"small\"\n                  placeholder=\"模型目录\">\n                  <el-option v-for=\"dict in modelLvlOptions\" :key=\"dict.dictValue\" :label=\"dict.dictLabel\"\n                    :value=\"dict.dictValue\"></el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"表用途\" prop=\"tabTodo\">\n                <el-input clearable size=\"small\" v-model=\"form.tabTodo\" placeholder=\"请输入表用途\" />\n              </el-form-item>\n            </el-col>\n          </el-row> -->\n          <!-- <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"关联需求\" prop=\"demandId\">\n                <el-select class=\"width100\" size=\"small\" clearable filterable remote v-model=\"form.demandId\"\n                  placeholder=\"请搜索或选择\" :loading=\"doLoading\" :remote-method=\"demandRelaQuery\" @change=\"demandOnChange\">\n                  <el-option v-for=\"dema in demandOptions\" :key=\"dema.demandId\" :label=\"dema.demandName\"\n                    :value=\"dema.demandId\" />\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"数据更新频率\" prop=\"dataUpdFrequency\">\n                <el-select class=\"block\" v-model=\"form.dataUpdFrequency\" filterable clearable size=\"small\"\n                  placeholder=\"选择数据更新频率\">\n                  <el-option v-for=\"dict in demandReqFrequencyList\" :key=\"dict.dictValue\" :label=\"dict.dictLabel\"\n                    :value=\"dict.dictValue\"></el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"数据更新时间\" prop=\"dataUpdTime\">\n                <el-input clearable size=\"small\" v-model=\"form.dataUpdTime\" placeholder=\"请输入数据更新时间\" />\n              </el-form-item>\n            </el-col>\n          </el-row> -->\n          <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n              <el-form-item label=\"表描述\" prop=\"tabDesc\">\n                <el-input clearable :rows=\"4\" type=\"textarea\" v-model=\"form.tabDesc\" placeholder=\"请输入表描述\"\n                  size=\"small\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane label=\"配置数据模型\" name=\"second\" :disabled=\"secondDisabled\" class=\"pane\">\n\n        <el-row :gutter=\"20\">\n          <el-button v-if='openTypes==false' class=\"filter-item\" style=\"float:left; margin:0 0 5px 10px;\" type=\"success\"\n            icon=\"el-icon-refresh\" @click=\"syncGetColumns\">同步</el-button>\n            <el-button class=\"filter-item\" style=\"float:left; margin:0 0 5px 10px;\" type=\"success\" v-if='openTypes==true'\n            icon=\"el-icon-refresh\" @click=\"resertGetColumns\">重置</el-button><br>\n        </el-row>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"openTypes==false?12:24\">\n            <el-table ref=\"table\" v-loading=\"loading\" :data=\"fieldsData\" size=\"small\" :cell-style=\"cellStyle\">\n              <el-table-column type=\"index\" label=\" 序号\" width=\"60px\" />\n              <el-table-column prop=\"colNameCn\" label=\" 字段中文名\" width=\"200px\">\n                <template slot-scope=\"scope\">\n                  <el-input clearable size=\"small\" v-model=\"scope.row.colNameCn\" placeholder=\"字段中文名\" />\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"colName\" label=\"字段列名\" width=\"200px\" />\n              <el-table-column prop=\"colType\" label=\"物理类型\" width=\"100px\" >\n              <template slot-scope=\"scope\">\n                  <el-input clearable size=\"small\" v-model=\"scope.row.colType\" placeholder=\"物理类型\" />\n                </template>\n              </el-table-column>\n              <!-- <el-table-column prop=\"colDesc\" label=\"注释\" width=\"200px\" /> -->\n              <el-table-column label=\"操作\" fixed=\"right\">\n                <template slot-scope=\"scope\">\n                  <el-button v-if=\"scope.row.status == '1'\" size=\"mini\" type=\"text\" icon=\"el-icon-edit\"\n                    @click=\"innerUpdate(scope.$index, fieldsData)\">停用</el-button>\n                  <el-button v-if=\"scope.row.status == '2'\" size=\"mini\" type=\"text\" icon=\"el-icon-edit\"\n                    @click=\"innerUpdate(scope.$index, fieldsData)\">启用</el-button>\n                  <!-- <el-button v-if=\"scope.row.status == '2'\" size=\"mini\" type=\"text\" icon=\"el-icon-delete\"\n                    @click=\"innerDelete(scope.$index, fieldsData)\">删除\n                  </el-button> -->\n                </template>\n              </el-table-column>\n            </el-table>\n\n          </el-col>\n          <el-col :span=\"12\" v-if='openTypes==false'>\n            <el-table ref=\"table\" v-loading=\"loading\" class=\"tableStyle\" :data=\"syncFieldsData\" size=\"small\"   :cell-style=\"cellStyle\">\n              <el-table-column type=\"index\" label=\" 序号\" width=\"60px\" />\n              <el-table-column prop=\"colNameCn\" label=\" 字段中文名\" width=\"200px\"/>\n\n              <el-table-column prop=\"colName\" label=\"字段列名\" width=\"200px\"/>\n              <el-table-column prop=\"colType\" label=\"物理类型\" width=\"100px\"/>\n              <!-- <el-table-column prop=\"colDesc\" label=\"注释\" width=\"200px\" /> -->\n\n               <el-table-column label=\"操作\" fixed=\"right\">\n                <template slot-scope=\"scope\">\n                 \n                </template>\n              </el-table-column>\n\n            </el-table>\n\n          </el-col>\n        </el-row>\n      </el-tab-pane>\n    </el-tabs>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button type=\"success\" plain round @click=\"cancel\">取消</el-button>\n      <el-button type=\"success\" round @click=\"submitForm()\">提交</el-button>\n    </div>\n  </el-dialog>\n\n  <!-- SQL预览 -->\n  <el-dialog title=\"SQL预览\" width=\"90%\" :visible.sync=\"dialogVisible\" :close-on-click-modal=\"false\" append-to-body>\n    <SqlEditor v-loading=\"creTabsqlLoading\" class=\"sqleditor bordered mb20\" height=\"600px\" ref=\"sqleditor\">\n    </SqlEditor>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button size=\"small\" @click=\"dialogVisible = false\">关 闭</el-button>\n    </span>\n  </el-dialog>\n\n</div>\n",null]}