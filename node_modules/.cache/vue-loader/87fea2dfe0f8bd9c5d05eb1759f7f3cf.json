{"remainingRequest":"D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\atom\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\atom\\index.vue","mtime":1645075664942},{"path":"D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace-suzhouzhibiao\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport crudIndAtomInfo, {\n  getColumnByTabel,\n  getDimensions,\n  getGenAndDerivedInd,\n  getAllInds,\n  getGenInd,\n  getTablesById, bizNameIsContract, abolish,startProcess,delAtom,getHisList,checkRef,approveDetailByOriginalInstId\n} from '@/api/indicators/indAtomInfo'\nimport crudIndDimInfo, {getDimInfos} from '@/api/indicators/indDimInfo'\nimport crudIndDimVal,{getDimValues, getDimValuesChildren} from '@/api/indicators/indDimValue'\nimport {getAllSource, getDimInfo, process} from '@/api/indicators/indIndicatorInfo'\nimport CRUD, {crud, form, header, presenter} from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport udOperation from '@crud/UD.operation'\nimport pagination from '@crud/Pagination'\nimport category from '../../category/categoryNew'\nimport dimensionPage from '../atom/dimension/index'\nimport atomPage from './atomPage'\nimport selectAtom from './selectAtom'\nimport {isSignedInteger,isArabicFigures, validateStrLenFiveHundred, validateStrLenHundred,validateStrLenHalfHundred} from '@/utils/validator'\nimport {getClassifications} from '@/api/indicators/indClassification'\nimport crudIndCategory from '@/api/indicators/indCategory'\nimport { getDepts,getCurrentDept } from '@/utils/system'\nimport Treeselect from '@riophae/vue-treeselect'\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nimport DimValTreeSelect from '../../dimension/DimValTreeSelect'\nimport qs from \"qs\";\nimport { v4 as uuidv4 } from 'uuid';\nimport {checkDeptUser} from '@/api/workflow/graphConfig'\n// crud交由presenter持有\nconst defaultCrud = CRUD({\n  title: '指标信息',\n  url: crudIndAtomInfo.url,\n  sort: 'id,desc',\n  crudMethod: { ...crudIndAtomInfo.crud }\n})\nconst defaultForm = {\n  id: null,\n  categoryId: null,\n  sourceDataSource: 'local',\n  targetDataSource: 'local',\n  bizCode: null,\n  bizName: null,\n  genBizName: null,// 根指标名称\n  indFirstType: null,// 指标一级分类\n  indSecondType: null,// 指标二级分类\n  businessDept: null,// 业务属主部门\n  indLevel: null, // 指标层级\n  isDeptQuery: true,// 是否部门内部都可查询指标结果\n  isAdditionalRecording: 'false',// 指标结果是否会补录\n  indDimAndValueRelations: [],\n  indDefinition: null,// 指标定义\n  indDefRule: null,// 指标口径规则\n  indValueRange1: null,// 指标取值范围1\n  indValueRange2: null,// 指标取值范围2\n  indInnerWarnValue: '',// 指标内部警戒值（表示预警）\n  indInnerWarnPassValue: '',// 指标内部警戒值（表示通过）\n  indInnerWarnFlg: '',\n  indMonWarnValue: '',// 指标监管警戒值（表示预警）\n  indMonWarnPassValue: '',// 指标监管警戒值（表示通过）\n  indMonWarnFlg: '',\n  currency: null,// 币种\n  indValueType: null,// 指标数值属性\n  indFrequency: [],// 指标生成频率\n  indCalType: null,// 度量单位\n  indSafeLevel: null,// 指标安全等级\n  indMonField: null,// 监管属性\n  indProcessSys: null,// 权威加工系统\n  indDataType: null,// 数据类型\n  indDataForm: null,// 数据格式\n  indReference: null,// 参考依据\n  isRealTimeProcess: false,// 是否需要实时加工\n  indCurrentValue: true,// 当期值\n  indContemporaneousValue: true,// 同期值\n  indYearOnYearIncrement: true,// 同比增量\n  indYearOnYearGrowth: true,// 同比增幅\n  indPreviousPeriodValue: true,// 上期值\n  indMonthOnMonthIncrement: true,// 环比增量\n  indMonthOnMonthGrowth: true,// 环比增幅\n  indInitialValueOfTheYear: true,// 年初值\n  indYearOnYearIncre: true,// 较年初增量\n  indIncreaseOverTheBeginningOfTheYear: true,// 较年初增幅\n  indVerifyStatus: null,// 指标审批状态\n  indDeployStatus: null,// 指标发布状态\n  indVerifyId: null,\n  indStandSource: null,// 标准来源\n  ieProp: null,\n  createTable: null,\n  keepHistory: '1',\n  bizTabCode: null,\n  bizFlag: null,\n  bizCalcSql: null,// 实时指标取数SQL\n  bizBatchCalcSql: null,// 批量指标取数SQL\n  dimNames: null,\n  bizDesc: null,\n  calcSeq: null,\n  calcFreq: null,\n  crtUserCode: null,\n  crtOrgCode: null,\n  crtDate: null,\n  updUserCode: null,\n  updOrgCode: null,\n  updDate: null,\n  tenant: null,\n  retention: null,\n  tableShare: '1',\n  status: '2',\n  categoryType: '0',\n  atomDimensions: [],\n  indDefRuleStr: '',\n  indDefRuleVal: '',\n  submitType: 1\n}\nexport default {\n  name: 'IndAtomInfo',\n  components: {Treeselect,pagination, crudOperation, rrOperation, udOperation, category, dimensionPage, atomPage,selectAtom,DimValTreeSelect },\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n  dicts: ['IE_PROP', 'CREATE_TABLE', 'YN', 'RETENTION', 'IE_STATUS', 'GEN_IND', 'IND_FIRST_TYPE', 'IND_SECOND_TYPE', 'BUSSINESS_DEPT',\n    'IND_LEVEL', 'IND_CURRENCY', 'IND_VALUE_TYPE', 'IE_FREQUENCY', 'IND_CAL_TYPE', 'IND_SAFE_LEVEL', 'IND_MON_FIELD', 'IND_PROCESS_SYS',\n    'IND_DATA_TYPE', 'IND_STAND_SOURCE', 'DIMENSION_CATEGORY', 'DIMENSION', 'LAST_LEVEL_DIMENSION_VALUE','IND_VERIFY_STATUS','IND_DEPLOY_STATUS'],\n  data() {\n    return {\n      categoryType: '0',\n      sign: {\n        isSign : '0',\n        signDeptId: null,\n        signDeptName: null,\n        oprType: 1,\n        title: '发起审批流程',\n        msg: '是否发起审批流程? ',\n        data: null\n      },\n      showSign: false,\n      showSignOrg: false,\n      errmsgIndDefRule: false,\n      indDefRuleErr: '指标口径规则不能为空',\n      signTitle: '发起审批流程',\n      filterText: '',\n      indexOrgTab: {\n        menuLoading: false,\n        data: [],\n        loading: false,\n        operators: [],\n        strictly: true\n      },\n      dimAndValueObject1: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject2: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject3: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject4: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject5: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject6: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject7: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject8: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject9: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject10: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      errmsgInnerWarning: false,\n      errmsgMonWarning: false,\n      innerwarningErrMsg: '请选择运算符',\n      monwarningErrMsg: '请选择运算符',\n      table: {\n        columns: {\n          sourceDataSource: 'hidden',\n          targetDataSource: 'hidden',\n          keepHistory: 'hidden',\n          bizDesc: 'hidden',\n          crtOrgCode: 'hidden',\n          crtDate: 'hidden',\n          updUserCode: 'hidden',\n          updOrgCode: 'hidden',\n          updDate: 'hidden',\n          tenant: 'hidden'\n        }\n      },\n      permission: {\n        processA: ['indAtomInfo:processA'],\n        add: ['indAtomInfo:add'],\n        edit: ['indAtomInfo:edit'],\n        del: ['indAtomInfo:del'],\n        details: ['indAtomInfo:details'],\n        workflow: ['indAtomInfo:workflow'],\n        batchCheckResult: ['indAtomInfo:batchCheckResult'],\n        historyVersion: ['indAtomInfo:historyVersion'],\n        cancelInd: ['indAtomInfo:cancelInd'],\n        processVerify: ['indAtomInfo:processVerify'],\n        historyVersionDetail: ['indAtomInfo:historyVersionDetail']\n      },\n      rules: {\n        bizName: [\n          { required: true, message: '指标名称不能为空', trigger: 'blur' },\n          { validator: validateStrLenHundred, trigger: 'blur' }\n        ],\n        ieProp: [\n          { required: true, message: '指标类型不能为空', trigger: 'change' }\n        ],\n        genBizName: [\n          { required: true, message: '根指标不能为空', trigger: 'change' }\n        ],\n        indFirstType: [\n          { required: true, message: '指标一级分类不能为空', trigger: 'change' }\n        ],\n        indSecondType: [\n          { required: true, message: '指标二级分类不能为空', trigger: 'change' }\n        ],\n        businessDept: [\n          { required: true, message: '业务属主部门不能为空', trigger: 'change' }\n        ],\n        indLevel: [\n          { required: true, message: '指标层级不能为空', trigger: 'change' }\n        ],\n        indDefinition: [\n          { required: true, message: '指标定义不能为空', trigger: 'blur' },\n          { validator: validateStrLenFiveHundred, trigger: 'blur' }\n        ],\n        indDefRule: [\n         /* { required: this.hasCalc, message: '指标口径规则不能为空', trigger: 'blur' },*/\n          { required: true, message: '指标口径规则不能为空', trigger: 'blur' },\n          { validator: validateStrLenFiveHundred, trigger: 'blur' }\n        ],\n        indValueRange1: [\n          { validator: isArabicFigures, trigger: 'blur' }\n        ],\n        indValueRange2: [\n          { validator: isArabicFigures, trigger: 'blur' }\n        ],\n        currency: [\n          { required: true, message: '币种不能为空', trigger: 'change' }\n        ],\n        indFrequency: [\n          { required: true, message: '指标生成频率不能为空', trigger: 'change' }\n        ],\n        indCalType: [\n          { required: true, message: '度量单位不能为空', trigger: 'change' }\n        ],\n        indMonField: [\n          { required: true, message: '监管属性不能为空', trigger: 'change' }\n        ],\n        indDataType: [\n          { required: true, message: '数据类型不能为空', trigger: 'change' }\n        ],\n        indDataForm: [\n          { max: 10, message: '数据格式不能超过10字', trigger: ['blur', 'change'] }\n        ],\n        indReference: [\n          { max: 50, message: '参考不能超过50字', trigger: ['blur', 'change'] }\n        ],\n        isAdditionalRecording: [\n          { required: true, message: '指标结果是否会补录不能为空', trigger: 'change' }\n        ]\n        /*,\n        dimension1: [\n          {required: true, message: '维度1不能为空', trigger: 'change'}\n        ],\n        dimensionValue1: [\n          {required: true, message: '维度值1不能为空', trigger: 'change'}\n        ]*/\n      },\n      dimensionRules: {\n        categoryName: [\n          { required: true, message: '指标维度名称不能为空', trigger: 'change' }\n        ],\n        classificationId: [\n          { required: true, message: '所属分类不能为空', trigger: 'change' }\n        ],\n      },\n      dimensionValueRules: {\n        dimInfoId: [\n          { required: true, message: '所属维度不能为空', trigger: 'change' }\n        ],\n        categoryName: [\n          { required: true, message: '指标维度值不能为空', trigger: 'change' }\n        ]\n      },\n      signRules: {\n        isSign: [\n          { required: true, message: '请选择是否会签', trigger: 'change' }\n        ],\n        signDeptId: [\n          { required: true, message: '请选择会签机构', trigger: 'change' }\n        ]\n      },\n      sourceData: [],\n      tableInfo: [],\n      atomDimensions: [],\n      bizTabCodeDis: false,\n      // 计算输日期的页面\n      processDialog: false,\n      // 传给后台的参数\n      processParam: {\n        codes: [],\n        periodDate: ''\n      },\n      dateValue: '',\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      dimensionArr: [],\n      dimensionTitle: '维度',\n      dimensionNumber: 2,\n      dimensionTmp: null,\n      dimensionValueArr: [],\n      dimensionValueTitle: '维度值',\n      dimensionValueNumber: 2,\n      dimensionValueTmp: null,\n      showIndDefRule: false,\n      showIndHistory: false,\n      indInnerWarnValueArr: [1],\n      indInnerWarnValueNumber: 1,\n      indInnerWarnPassValueArr: [1],\n      indInnerWarnPassValueNumber: 1,\n      indMonWarnValueArr: [1],\n      indMonWarnValueNumber: 1,\n      indMonWarnPassValueArr: [1],\n      indMonWarnPassValueNumber: 1,\n      historyData: [],\n      showIndDimensionAdd: false,\n      flowData:[],\n      showFlow:false,\n      dimension: {\n        id: null,\n        classificationId: null,// 所属分类\n        categoryName: null,// 指标维度名称\n        remarks: null,// 备注\n        serialNo: null\n      },\n      showIndDimensionValueAdd: false,\n      dimensionValue: {\n        dimension: null,// 所属维度\n        lastLevelDimensionValue: null,// 上级维度值\n        dimValue: null,// 指标维度值\n        serialNo: null\n      },\n      renderFunc(h, option) {\n        return <span>{ option.label }</span>;\n      },\n      transferData: [],\n      value: [],\n      indDefRuleStr: '',\n      indDefRuleId: '',\n      indDefRuleVal: '',\n      genIndArr: [],\n      genAndDerivedIndArr: [],\n      dimInfoArr: [],\n      dimValueArr1: [],\n      dimValueArr2: [],\n      dimValueArr3: [],\n      dimValueArr4: [],\n      dimValueArr5: [],\n      dimValueArr6: [],\n      dimValueArr7: [],\n      dimValueArr8: [],\n      dimValueArr9: [],\n      dimValueArr10: [],\n      parentDimValueArr: [],\n      classificationArr: [],\n      dimValueTmp1: [],\n      dimValueTmp2: [],\n      dimValueTmp3: [],\n      dimValueTmp4: [],\n      dimValueTmp5: [],\n      dimValueTmp6: [],\n      dimValueTmp7: [],\n      dimValueTmp8: [],\n      dimValueTmp9: [],\n      dimValueTmp10: [],\n\n      dimValueTmpName1: [],\n      dimValueTmpName2: [],\n      dimValueTmpName3: [],\n      dimValueTmpName4: [],\n      dimValueTmpName5: [],\n      dimValueTmpName6: [],\n      dimValueTmpName7: [],\n      dimValueTmpName8: [],\n      dimValueTmpName9: [],\n      dimValueTmpName10: [],\n\n      formDialog: false,\n      qryIndFirstType: [],\n      qryIndSecondType: [],\n      formIndFirstType: [],\n      formIndSecondType: [],\n      depts:[],\n      hisIeId: null,\n      errmsgDim1: false,\n      errmsgDimV1: false,\n      errmsgDim2: false,\n      errmsgDimV2: false,\n      errmsgDim3: false,\n      errmsgDimV3: false,\n      errmsgDim4: false,\n      errmsgDimV4: false,\n      errmsgDim5: false,\n      errmsgDimV5: false,\n      errmsgDim6: false,\n      errmsgDimV6: false,\n      errmsgDim7: false,\n      errmsgDimV7: false,\n      errmsgDim8: false,\n      errmsgDimV8: false,\n      errmsgDim9: false,\n      errmsgDimV9: false,\n      errmsgDim10: false,\n      errmsgDimV10: false,\n      isBizNameContract : true,\n      //hasCalc: false\n      hasCalc: true,\n      isSelfRule: false,\n      categorySpan: 6,\n      tableSpan: 18,\n      zoomDirection: 'left'\n    }\n  },\n  created() {\n    this.crud.optShow.del=false\n    this.crud.optShow.edit=false\n    this.initDimInfos(2)\n    //this.initDimValuesChildren()\n    this.initDimValues(2)\n    this.initClassifications()\n    this.initGenAndDerivedInd()\n    this.initIndFirstType()\n    this.getDepts();\n    if(this.query.categoryType == null) {\n      this.query.categoryType = 0;\n    }\n    this.isSelfRule= false\n    this.getCurrentDept()\n    this.resetQuery()\n  },\n  mounted() {\n    this.query.bizName = this.$route.query.ieName\n    this.crud.refresh()\n    this.sign.isSign = '0'\n    this.sign.signDeptId = null\n    this.sign.signDeptName =null\n    this.showSignOrg = false\n   },\n  watch: {\n    filterText(val) {\n      this.$refs.signOrgTree.filter(val);\n    },\n    indDefRuleStr(val) {\n      if(this.endsWithStr(val)) {\n        this.errmsgIndDefRule = true\n        this.indDefRuleErr ='口径规则表达式错误'\n      } else {\n        this.errmsgIndDefRule = false\n        this.indDefRuleErr ='指标口径规则不能为空'\n      }\n    }\n  },\n  methods: {\n    resetQuery(){\n      this.crud.resetQuery(false);\n      this.query.categoryType = this.categoryType\n      this.crud.refresh()\n    },\n    checkIndDefRule(val) {\n      if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n        if(this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空'\n          this.errmsgIndDefRule = true\n        } else if (this.form.indDefRule.length > 500){\n          this.indDefRuleErr = '长度不能超过500字符'\n          this.errmsgIndDefRule = true\n        } else {\n          this.indDefRuleErr = '指标口径规则不能为空'\n          this.errmsgIndDefRule = false\n        }\n      } else {\n        this.indDefRuleErr = '指标口径规则不能为空'\n        this.errmsgIndDefRule = false\n      }\n\n    },\n    closeSignDialog() {\n      this.sign.isSign = 0;\n      this.sign.signDeptId = ''\n      this.sign.signDeptName =null\n      this.showSign = false\n      this.showSignOrg = false\n    },\n    changeIsSign(val) {\n      this.showSignOrg = val == 1;\n    },\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.label.indexOf(value) !== -1;\n    },\n    checkSignOrg(data,node) {\n      console.debug('======checkSignOrg======',data,node)\n      this.sign.signDeptId=node.checkedKeys.join(\",\")\n      this.sign.signDeptName=node.checkedNodes.map(e=>e.label).join(\",\")\n\n    },\n    changeIeProp(val) {\n      if(val == 3) {\n        this.dimAndValueObject1.isShow = true;\n        this.dimAndValueObject2.isShow = true;\n      } else {\n        this.dimAndValueObject1.isShow = false;\n        this.dimAndValueObject2.isShow = false;\n      }\n      if(val == 2) {\n        this.isSelfRule = false\n      } else {\n        this.isSelfRule = true\n      }\n      this.changeIsSelfRule(this.isSelfRule)\n      /*if(val == 2) {\n        if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n          //this.hasCalc = true;\n        }else {\n          //this.hasCalc = false;\n        }\n      } else {\n        //this.hasCalc = false;\n      }*/\n    },\n    changeContemporaneous(val) {\n      if(val) {\n        this.form.indContemporaneousValue = val;\n        this.form.indYearOnYearIncrement = val;\n      }\n    },\n    changePreviousPeriod(val){\n      if(val) {\n        this.form.indPreviousPeriodValue = val;\n        this.form.indMonthOnMonthIncrement = val;\n      }\n    },\n    changeInitialValue(val){\n      if(val) {\n        this.form.indInitialValueOfTheYear = val;\n        this.form.indYearOnYearIncre = val;\n      }\n    },\n    forceUpdate() {\n      this.$forceUpdate()\n    },\n    genBizNameChange(){\n      for (let i = 0; i < Object.keys(this.genIndArr).length; i++) {\n        if(this.genIndArr[i].id == this.form.genBizName){\n          if(this.genIndArr[i].isAdditionalRecording == true){\n            this.warnMsg = true\n            this.$message({\n              message: '该指标结果可能存在补录，请确认是否引用！',\n              type: 'warning'\n            });\n          }\n        }\n      }\n    },\n    validateBizNameContract(){\n      let that = this;\n      bizNameIsContract(that.form.id,that.form.bizName).then(res => {\n        if(res.code == 0) {\n          if(res.data) {\n            this.$message.error(\"指标名称重复,请重新输入\")\n            that.isBizNameContract = false\n            return;\n          }\n          that.isBizNameContract = true\n        }else {\n          this.$message.error(\"系统错误\")\n          that.isBizNameContract = false\n        }\n      })\n    },\n    initDimInfos(status) {\n      getDimInfos( {size: 100, page: 0,tenant: this.form.tenant,status: status}).then(data => {\n        this.dimInfoArr = data.data.records\n      })\n    },\n    initSubDimVal(dimId,treeLevel,status) {\n      getDimValues( {size: 100, page: 0,tenant: this.form.tenant,status: status,treeLevel: treeLevel,treeId: dimId}).then(data => {\n        this.parentDimValueArr = data.data.records\n      })\n    },\n    initDimVal(dimId,item){\n      let _this = this;\n      if(item == 1) {\n        _this.dimAndValueObject1.dimensionValue = '';\n        _this.dimAndValueObject1.dimensionName = '';\n        _this.dimValueTmpName1=[]\n      } else if(item == 2) {\n        _this.dimAndValueObject2.dimensionValue = '';\n        _this.dimAndValueObject2.dimensionName = '';\n        _this.dimValueTmpName2=[]\n      } else if(item == 3) {\n        _this.dimAndValueObject3.dimensionValue = '';\n        _this.dimAndValueObject3.dimensionName = '';\n        _this.dimValueTmpName3=[]\n      } else if(item == 4) {\n        _this.dimAndValueObject4.dimensionValue = '';\n        _this.dimAndValueObject4.dimensionName = '';\n        _this.dimValueTmpName4=[]\n      } else if(item == 5) {\n        _this.dimAndValueObject5.dimensionValue = '';\n        _this.dimAndValueObject5.dimensionName = '';\n        _this.dimValueTmpName5=[]\n      } else if(item == 6) {\n        _this.dimAndValueObject6.dimensionValue = '';\n        _this.dimAndValueObject6.dimensionName = '';\n        _this.dimValueTmpName6=[]\n      } else if(item == 7) {\n        _this.dimAndValueObject7.dimensionValue = '';\n        _this.dimAndValueObject7.dimensionName = '';\n        _this.dimValueTmpName7=[]\n      } else if(item == 8) {\n        _this.dimAndValueObject8.dimensionValue = '';\n        _this.dimAndValueObject8.dimensionName = '';\n        _this.dimValueTmpName8=[]\n      } else if(item == 9) {\n        _this.dimAndValueObject9.dimensionValue = '';\n        _this.dimAndValueObject9.dimensionName = '';\n        _this.dimValueTmpName9=[]\n      } else if(item == 10) {\n        _this.dimAndValueObject10.dimensionValue = '';\n        _this.dimAndValueObject10.dimensionName = '';\n        _this.dimValueTmpName10=[]\n      }\n\n      this.initDimValuesChildren(dimId,item);\n    },\n    initDimValuesChildren(dimId,item) {\n      let _this = this;\n      getDimValuesChildren( {size: 100, page: 0,dimId}).then(data => {\n        if(item == 1) {\n          _this.dimValueArr1 = data.data\n          if (dimId == null || dimId == '') {\n            _this.errmsgDim1 = true;\n            _this.dimAndValueObject1.dimensionValue = '';\n            _this.dimAndValueObject1.dimensionName = '';\n            _this.errmsgDimV1 = true;\n          }else if(_this.dimAndValueObject1.dimensionValue == null || _this.dimAndValueObject1.dimensionValue == ''){\n            _this.errmsgDimV1=true;\n            _this.errmsgDim1 = false;\n            _this.dimAndValueObject1.dimensionValue = '';\n            _this.dimAndValueObject1.dimensionName = '';\n          }\n        } else if(item == 2) {\n          _this.dimValueArr2 = data.data\n          if(_this.dimAndValueObject2.dimension == null || _this.dimAndValueObject2.dimension == '')\n          {\n            _this.errmsgDimV2=false;\n            _this.dimAndValueObject2.dimensionValue='';\n            _this.dimAndValueObject2.dimensionName='';\n          }else if(_this.dimAndValueObject2.dimensionValue == null || _this.dimAndValueObject2.dimensionValue == ''){\n            _this.errmsgDimV2=true;\n            _this.dimAndValueObject2.dimensionValue = '';\n            _this.dimAndValueObject2.dimensionName = '';\n          }\n        } else if(item == 3) {\n          _this.dimValueArr3 = data.data\n          if(_this.dimAndValueObject3.dimension == null || _this.dimAndValueObject3.dimension == '')\n          {\n            _this.errmsgDimV3=false;\n            _this.dimAndValueObject3.dimensionValue='';\n            _this.dimAndValueObject3.dimensionName='';\n          }else if(_this.dimAndValueObject3.dimensionValue == null || _this.dimAndValueObject3.dimensionValue == ''){\n            _this.errmsgDimV3=true;\n            _this.dimAndValueObject3.dimensionValue = '';\n            _this.dimAndValueObject3.dimensionName = '';\n          }\n        } else if(item == 4) {\n          _this.dimValueArr4 = data.data\n          if(_this.dimAndValueObject4.dimension == null || _this.dimAndValueObject4.dimension == '')\n          {\n            _this.errmsgDimV4=false;\n            _this.dimAndValueObject4.dimensionValue='';\n            _this.dimAndValueObject4.dimensionName='';\n          }else if(_this.dimAndValueObject4.dimensionValue == null || _this.dimAndValueObject4.dimensionValue == ''){\n            _this.errmsgDimV4=true;\n            _this.dimAndValueObject4.dimensionValue = '';\n            _this.dimAndValueObject4.dimensionName = '';\n          }\n        } else if(item == 5) {\n          _this.dimValueArr5 = data.data\n          if(_this.dimAndValueObject5.dimension == null || _this.dimAndValueObject5.dimension == '')\n          {\n            _this.errmsgDimV5=false;\n            _this.dimAndValueObject5.dimensionValue='';\n            _this.dimAndValueObject5.dimensionName='';\n          }else if(_this.dimAndValueObject5.dimensionValue == null || _this.dimAndValueObject5.dimensionValue == ''){\n            _this.errmsgDimV5=true;\n            _this.dimAndValueObject5.dimensionValue = '';\n            _this.dimAndValueObject5.dimensionName = '';\n          }\n        } else if(item == 6) {\n          _this.dimValueArr6 = data.data\n          if(_this.dimAndValueObject6.dimension == null || _this.dimAndValueObject6.dimension == '')\n          {\n            _this.errmsgDimV6=false;\n            _this.dimAndValueObject6.dimensionValue='';\n            _this.dimAndValueObject6.dimensionName='';\n          }else if(_this.dimAndValueObject6.dimensionValue == null || _this.dimAndValueObject6.dimensionValue == ''){\n            _this.errmsgDimV6=true;\n            _this.dimAndValueObject6.dimensionValue = '';\n            _this.dimAndValueObject6.dimensionName = '';\n          }\n        } else if(item == 7) {\n          _this.dimValueArr7 = data.data\n          if(_this.dimAndValueObject7.dimension == null || _this.dimAndValueObject7.dimension == '')\n          {\n            _this.errmsgDimV7=false;\n            _this.dimAndValueObject7.dimensionValue='';\n            _this.dimAndValueObject7.dimensionName='';\n          }else if(_this.dimAndValueObject7.dimensionValue == null || _this.dimAndValueObject7.dimensionValue == ''){\n            _this.errmsgDimV7=true;\n            _this.dimAndValueObject7.dimensionValue = '';\n            _this.dimAndValueObject7.dimensionName = '';\n          }\n        } else if(item == 8) {\n          _this.dimValueArr8 = data.data\n          if(_this.dimAndValueObject8.dimension == null || _this.dimAndValueObject8.dimension == '')\n          {\n            _this.errmsgDimV8=false;\n            _this.dimAndValueObject8.dimensionValue='';\n            _this.dimAndValueObject8.dimensionName='';\n          }else if(_this.dimAndValueObject8.dimensionValue == null || _this.dimAndValueObject8.dimensionValue == ''){\n            _this.errmsgDimV8=true;\n            _this.dimAndValueObject8.dimensionValue = '';\n            _this.dimAndValueObject8.dimensionName = '';\n          }\n        } else if(item == 9) {\n          _this.dimValueArr9 = data.data\n          if(_this.dimAndValueObject9.dimension == null || _this.dimAndValueObject9.dimension == '')\n          {\n            _this.errmsgDimV9=false;\n            _this.dimAndValueObject9.dimensionValue='';\n            _this.dimAndValueObject9.dimensionName='';\n          }else if(_this.dimAndValueObject9.dimensionValue == null || _this.dimAndValueObject9.dimensionValue == ''){\n            _this.errmsgDimV9=true;\n            _this.dimAndValueObject9.dimensionValue = '';\n            _this.dimAndValueObject9.dimensionName = '';\n          }\n        } else if(item == 10) {\n          _this.dimValueArr10 = data.data\n          if(_this.dimAndValueObject10.dimension == null || _this.dimAndValueObject10.dimension == '')\n          {\n            _this.errmsgDimV10=false;\n            _this.dimAndValueObject10.dimensionValue='';\n            _this.dimAndValueObject10.dimensionName='';\n          }else if(_this.dimAndValueObject10.dimensionValue == null || _this.dimAndValueObject10.dimensionValue == ''){\n            _this.errmsgDimV10=true;\n            _this.dimAndValueObject10.dimensionValue = '';\n            _this.dimAndValueObject10.dimensionName = '';\n          }\n        }\n\n      })\n    },\n    initDimValues(status) {\n      getDimValues( {size: 100, page: 0,tenant: this.form.tenant,status: status}).then(data => {\n        this.parentDimValueArr = data.data.records\n      })\n    },\n    initClassifications() {\n      getClassifications({size: 100, page: 0}).then(data => {\n        this.classificationArr = data.data.records\n      })\n    },\n    initGenAndDerivedInd() {\n      getAllInds().then(data => {\n        this.genAndDerivedIndArr = data.data\n        for (let i = 0; i < this.genAndDerivedIndArr.length; i++) {\n          this.transferData.push({key: this.genAndDerivedIndArr[i].id + ',' + this.genAndDerivedIndArr[i].bizName+ ',' + this.genAndDerivedIndArr[i].isAdditionalRecording + ',' + this.genAndDerivedIndArr[i].bizCode, label: this.genAndDerivedIndArr[i].bizName})\n        }\n      })\n    },\n    initIndFirstType() {\n      crudIndCategory.getCategoryList(0).then(res => {\n        this.qryIndFirstType = [];\n        this.formIndFirstType = [];\n        const data = res.data;\n        if(res.code == 0) {\n          for(let i=0; i<data.length; i++) {\n            this.qryIndFirstType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\n            this.formIndFirstType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\n          }\n        }\n      })\n    },\n    initIndSecondType(indFirstType,type) {\n      if(type == \"query\") {\n        this.qryIndSecondType = [];\n      }else {\n        this.formIndSecondType = [];\n      }\n      //let indFirstType = this.query.indFirstType;\n      if(indFirstType == null) {\n        return;\n      }\n      crudIndCategory.getCategoryList(indFirstType).then(res => {\n        const data = res.data;\n        if(res.code == 0) {\n          for(let i=0; i<data.length; i++) {\n            if(type == \"query\"){\n              this.qryIndSecondType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\n            } else {\n              this.formIndSecondType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\n            }\n\n          }\n        }\n      })\n    },\n    // 获取数据前设置好接口地址\n    [CRUD.HOOK.beforeRefresh]() {\n      //this.crud.optShow.edit = true\n      // this.query.ieType = '4'\n      return true\n    },\n    [CRUD.HOOK.afterRefresh]() {\n      // getAllSource().then(data => {\n      //   this.sourceData = [{ id: 'local', datasourceName: '默认数据源' }].concat(data.data)\n      // })\n      getGenInd().then(data => {\n        this.genIndArr = data.data\n      })\n    },\n    [CRUD.HOOK.beforeToEdit]() {\n      this.form.formType= 'edit';\n      this.form.serialNo = this.generatorUUID();\n      this.initDimInfos(2);\n      this.form.indVerifyStatus = this.crud.selections[0].indVerifyStatus\n      this.form.indDeployStatus = this.crud.selections[0].indDeployStatus\n      this.form.id = this.crud.selections[0].id\n      this.form.bizCode = this.crud.selections[0].bizCode\n      this.form.ieProp = this.crud.selections[0].ieProp\n      this.form.genBizName = this.crud.selections[0].genBizName\n      this.form.bizName = this.crud.selections[0].bizName\n      this.form.indFirstType = this.crud.selections[0].indFirstType\n      this.form.categoryType = this.crud.selections[0].categoryType\n      this.initIndSecondType(this.form.indFirstType,'form')\n      this.form.indSecondType = this.crud.selections[0].indSecondType\n      if(this.form.ieProp == 3) {\n        this.dimAndValueObject1.isShow = true\n        this.dimAndValueObject1.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[0] == null? null : this.crud.selections[0].indDimAndValueRelations[0].dimension\n        this.dimAndValueObject1.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[0] == null? null : this.crud.selections[0].indDimAndValueRelations[0].dimensionValue\n        if(this.dimAndValueObject1.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject1.dimension,1)\n        }\n        this.dimAndValueObject1.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[0]==null? null : this.crud.selections[0].indDimAndValueRelations[0].dimensionName\n\n        this.dimAndValueObject2.isShow = true\n        this.dimAndValueObject2.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[1] == null? null : this.crud.selections[0].indDimAndValueRelations[1].dimension\n        if(this.dimAndValueObject2.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject2.dimension,2)\n        }\n        this.dimAndValueObject2.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[1] == null? null : this.crud.selections[0].indDimAndValueRelations[1].dimensionValue\n        this.dimAndValueObject2.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[1]==null? null : this.crud.selections[0].indDimAndValueRelations[1].dimensionName\n\n        this.dimAndValueObject3.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[2]==null? false : true\n        this.dimAndValueObject3.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[2]==null? null : this.crud.selections[0].indDimAndValueRelations[2].dimension\n        if(this.dimAndValueObject3.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject3.dimension,3)\n        }\n        this.dimAndValueObject3.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[2]==null? null : this.crud.selections[0].indDimAndValueRelations[2].dimensionValue\n        this.dimAndValueObject3.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[2]==null? null : this.crud.selections[0].indDimAndValueRelations[2].dimensionName\n\n        this.dimAndValueObject4.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[3]==null? false : true\n        this.dimAndValueObject4.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[3]==null? null : this.crud.selections[0].indDimAndValueRelations[3].dimension\n        if(this.dimAndValueObject4.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject4.dimension,4)\n        }\n        this.dimAndValueObject4.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[3]==null? null : this.crud.selections[0].indDimAndValueRelations[3].dimensionValue\n        this.dimAndValueObject4.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[3]==null? null : this.crud.selections[0].indDimAndValueRelations[3].dimensionName\n\n        this.dimAndValueObject5.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[4]==null? false : true\n        this.dimAndValueObject5.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[4]==null? null : this.crud.selections[0].indDimAndValueRelations[4].dimension\n        if(this.dimAndValueObject5.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject5.dimension,5)\n        }\n        this.dimAndValueObject5.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[4]==null? null : this.crud.selections[0].indDimAndValueRelations[4].dimensionValue\n        this.dimAndValueObject5.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[4]==null? null : this.crud.selections[0].indDimAndValueRelations[4].dimensionName\n\n        this.dimAndValueObject6.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[5]==null? false : true\n        this.dimAndValueObject6.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[5]==null? null : this.crud.selections[0].indDimAndValueRelations[5].dimension\n        if(this.dimAndValueObject6.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject6.dimension,6)\n        }\n        this.dimAndValueObject6.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[5]==null? null : this.crud.selections[0].indDimAndValueRelations[5].dimensionValue\n        this.dimAndValueObject6.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[5]==null? null : this.crud.selections[0].indDimAndValueRelations[5].dimensionName\n\n        this.dimAndValueObject7.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[6]==null? false : true\n        this.dimAndValueObject7.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[6]==null? null : this.crud.selections[0].indDimAndValueRelations[6].dimension\n        if(this.dimAndValueObject7.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject7.dimension,7)\n        }\n        this.dimAndValueObject7.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[6]==null? null : this.crud.selections[0].indDimAndValueRelations[6].dimensionValue\n        this.dimAndValueObject7.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[6]==null? null : this.crud.selections[0].indDimAndValueRelations[6].dimensionName\n\n        this.dimAndValueObject8.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[7]==null? false : true\n        this.dimAndValueObject8.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[7]==null? null : this.crud.selections[0].indDimAndValueRelations[7].dimension\n        if(this.dimAndValueObject8.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject8.dimension,8)\n        }\n        this.dimAndValueObject8.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[7]==null? null : this.crud.selections[0].indDimAndValueRelations[7].dimensionValue\n        this.dimAndValueObject8.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[7]==null? null : this.crud.selections[0].indDimAndValueRelations[7].dimensionName\n\n        this.dimAndValueObject9.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[8]==null? false : true\n        this.dimAndValueObject9.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[8]==null? null : this.crud.selections[0].indDimAndValueRelations[8].dimension\n        if(this.dimAndValueObject9.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject9.dimension,9)\n        }\n        this.dimAndValueObject9.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[8]==null? null : this.crud.selections[0].indDimAndValueRelations[8].dimensionValue\n        this.dimAndValueObject9.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[8]==null? null : this.crud.selections[0].indDimAndValueRelations[8].dimensionName\n\n        this.dimAndValueObject10.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            false : this.crud.selections[0].indDimAndValueRelations[9]==null? false : true\n        this.dimAndValueObject10.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[9]==null? null : this.crud.selections[0].indDimAndValueRelations[9].dimension\n        if(this.dimAndValueObject10.isShow) {\n          this.initDimValuesChildren(this.dimAndValueObject10.dimension,10)\n        }\n        this.dimAndValueObject10.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[9]==null? null : this.crud.selections[0].indDimAndValueRelations[9].dimensionValue\n        this.dimAndValueObject10.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ?\n            null : this.crud.selections[0].indDimAndValueRelations[9]==null? null : this.crud.selections[0].indDimAndValueRelations[9].dimensionName\n\n      }\n\n      this.form.businessDept = this.crud.selections[0].businessDept\n      this.form.indLevel = this.crud.selections[0].indLevel\n      this.form.isDeptQuery = this.crud.selections[0].isDeptQuery\n      this.form.isAdditionalRecording = this.crud.selections[0].isAdditionalRecording? 'true':'false'\n      this.form.indDefinition = this.crud.selections[0].indDefinition\n      let defRule = this.crud.selections[0].indDefRule;\n      if (defRule != null) {\n        let defRuleArr = defRule.split(\"||\");\n        if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n          this.form.indDefRule = defRuleArr[0]\n        } else {\n          this.form.indDefRule = defRule;\n        }\n      }\n      this.form.indDefRuleStr = this.crud.selections[0].indDefRuleStr;\n      this.indDefRuleStr = this.crud.selections[0].indDefRuleStr;\n      if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n        this.isSelfRule = true\n      } else {\n        this.isSelfRule = false\n      }\n      if(this.crud.selections[0].indDefRuleVal !=null && this.crud.selections[0].indDefRuleVal != \"\") {\n        this.form.indDefRuleVal = this.crud.selections[0].indDefRuleVal;\n        this.form.indDefRuleId = this.crud.selections[0].indDefRuleId;\n        this.indDefRuleVal = this.crud.selections[0].indDefRuleVal;\n        this.indDefRuleId = this.crud.selections[0].indDefRuleId;\n      } else {\n        if (defRule != null) {\n          let defRuleArr = defRule.split(\"||\");\n          if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n            this.form.indDefRuleVal = defRuleArr[1];\n            this.form.indDefRuleId = defRuleArr[2];\n            this.indDefRuleVal = defRuleArr[1];\n            this.indDefRuleId = defRuleArr[2];\n          }\n        }\n      }\n      this.form.indValueRange1 = this.crud.selections[0].indValueRange1\n      this.form.indValueRange2 = this.crud.selections[0].indValueRange2\n      this.form.indInnerWarnValue = this.crud.selections[0].indInnerWarnValue\n      this.form.indMonWarnValue = this.crud.selections[0].indMonWarnValue\n      this.form.indInnerWarnFlg = this.crud.selections[0].indInnerWarnFlg\n      this.form.indMonWarnFlg = this.crud.selections[0].indMonWarnFlg\n      if(this.form.indInnerWarnValue != null && this.form.indInnerWarnValue != ''\n          && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n        this.errmsgInnerWarning = true\n      }\n      if(this.form.indMonWarnValue != null && this.form.indMonWarnValue != ''\n          && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n        this.errmsgMonWarning = true\n      }\n\n      this.form.currency = this.crud.selections[0].currency == null? null : Array.isArray(this.crud.selections[0].currency)? this.crud.selections[0].currency : this.crud.selections[0].currency.split(',')\n      this.form.indValueType = this.crud.selections[0].indValueType\n      this.form.indFrequency = this.crud.selections[0].indFrequency == null? null : Array.isArray(this.crud.selections[0].indFrequency)? this.crud.selections[0].indFrequency : this.crud.selections[0].indFrequency.split(',')\n      this.form.indCalType = this.crud.selections[0].indCalType\n      this.form.indSafeLevel = this.crud.selections[0].indSafeLevel\n      this.form.indMonField = this.crud.selections[0].indMonField\n      this.form.indProcessSys = this.crud.selections[0].indProcessSys\n      this.form.indDataType = this.crud.selections[0].indDataType\n      this.form.indDataForm = this.crud.selections[0].indDataForm\n      this.form.indReference = this.crud.selections[0].indReference\n      this.form.isRealTimeProcess = this.crud.selections[0].isRealTimeProcess\n      this.form.indCurrentValue = this.crud.selections[0].indCurrentValue\n      this.form.indContemporaneousValue = this.crud.selections[0].indContemporaneousValue\n      this.form.indYearOnYearIncrement = this.crud.selections[0].indYearOnYearIncrement\n      this.form.indYearOnYearGrowth = this.crud.selections[0].indYearOnYearGrowth\n      this.form.indPreviousPeriodValue = this.crud.selections[0].indPreviousPeriodValue\n      this.form.indMonthOnMonthIncrement = this.crud.selections[0].indMonthOnMonthIncrement\n      this.form.indMonthOnMonthGrowth = this.crud.selections[0].indMonthOnMonthGrowth\n      this.form.indInitialValueOfTheYear = this.crud.selections[0].indInitialValueOfTheYear\n      this.form.indYearOnYearIncre = this.crud.selections[0].indYearOnYearIncre\n      this.form.indIncreaseOverTheBeginningOfTheYear = this.crud.selections[0].indIncreaseOverTheBeginningOfTheYear\n      this.form.indVerifyId = this.crud.selections[0].indVerifyId\n      if(this.form.tenant == null) {\n        this.form.tenant = this.crud.selections[0].tenant\n      }\n\n      // getAllSource().then(data => {\n      //   this.sourceData = [{ id: 'local', datasourceName: '默认数据源' }].concat(data.data)\n      // })\n      // getTablesById(this.form.targetDataSource).then(data => {\n      //   this.tableInfo = data.data\n      // })\n    },\n    [CRUD.HOOK.beforeToDetail](data) {\n      this.form.id = data.form.id\n      this.form.bizCode = data.form.bizCode\n      this.form.ieProp = data.form.ieProp\n      this.form.genBizName = data.form.genBizName\n      this.form.bizName = data.form.bizName\n      this.form.indFirstType = data.form.indFirstType\n      this.initIndSecondType(this.form.indFirstType, 'form')\n      this.form.indSecondType = data.form.indSecondType\n      this.form.categoryType = data.form.categoryType\n      this.dimAndValueObject1.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[0] == null ? false : true\n      this.dimAndValueObject1.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimension\n      this.dimAndValueObject1.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimensionValue\n      this.dimAndValueObject1.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimensionName\n\n      this.dimAndValueObject2.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[1] == null ? false : true\n      this.dimAndValueObject2.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimension\n      this.dimAndValueObject2.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimensionValue\n      this.dimAndValueObject2.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimensionName\n\n      this.dimAndValueObject3.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[2] == null ? false : true\n      this.dimAndValueObject3.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimension\n      this.dimAndValueObject3.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionValue\n      this.dimAndValueObject3.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionName\n      this.dimAndValueObject3.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionName\n\n      this.dimAndValueObject4.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[3] == null ? false : true\n      this.dimAndValueObject4.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimension\n      this.dimAndValueObject4.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimensionValue\n      this.dimAndValueObject4.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimensionName\n\n      this.dimAndValueObject5.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[4] == null ? false : true\n      this.dimAndValueObject5.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimension\n      this.dimAndValueObject5.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimensionValue\n      this.dimAndValueObject5.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimensionName\n\n      this.dimAndValueObject6.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[5] == null ? false : true\n      this.dimAndValueObject6.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimension\n      this.dimAndValueObject6.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimensionValue\n      this.dimAndValueObject6.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimensionName\n\n      this.dimAndValueObject7.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[6] == null ? false : true\n      this.dimAndValueObject7.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimension\n      this.dimAndValueObject7.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimensionValue\n      this.dimAndValueObject7.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimensionName\n\n      this.dimAndValueObject8.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[7] == null ? false : true\n      this.dimAndValueObject8.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimension\n      this.dimAndValueObject8.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimensionValue\n      this.dimAndValueObject8.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimensionName\n\n      this.dimAndValueObject9.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[8] == null ? false : true\n      this.dimAndValueObject9.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimension\n      this.dimAndValueObject9.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimensionValue\n      this.dimAndValueObject9.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimensionName\n\n      this.dimAndValueObject10.isShow = data.form.indDimAndValueRelations.length == 0 ?\n          false : data.form.indDimAndValueRelations[9] == null ? false : true\n      this.dimAndValueObject10.dimension = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimension\n      this.dimAndValueObject10.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimensionValue\n      this.dimAndValueObject10.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\n          null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimensionName\n\n      this.form.businessDept = data.form.businessDept\n      this.form.indLevel = data.form.indLevel\n      this.form.isDeptQuery = data.form.isDeptQuery\n      this.form.isAdditionalRecording = data.form.isAdditionalRecording? 'true':'false'\n      this.form.indDefinition = data.form.indDefinition\n      //this.form.indDefRule = data.form.indDefRule\n      this.form.indValueRange1 = data.form.indValueRange1\n      this.form.indValueRange2 = data.form.indValueRange2\n      this.form.indInnerWarnValue = data.form.indInnerWarnValue\n      this.form.indMonWarnValue = data.form.indMonWarnValue\n      this.form.currency = data.form.currency == null ? null : Array.isArray(data.form.currency) ? data.form.currency : data.form.currency.split(\",\")\n      this.form.indValueType = data.form.indValueType\n      this.form.indFrequency = data.form.indFrequency == null ? null : Array.isArray(data.form.indFrequency) ? data.form.indFrequency : data.form.indFrequency.split(\",\")\n      this.form.indCalType = data.form.indCalType\n      this.form.indSafeLevel = data.form.indSafeLevel\n      this.form.indMonField = data.form.indMonField\n      this.form.indProcessSys = data.form.indProcessSys\n      this.form.indDataType = data.form.indDataType\n      this.form.indDataForm = data.form.indDataForm\n      this.form.indReference = data.form.indReference\n      this.form.isRealTimeProcess = data.form.isRealTimeProcess\n      this.form.indCurrentValue = data.form.indCurrentValue\n      this.form.indContemporaneousValue = data.form.indContemporaneousValue\n      this.form.indYearOnYearIncrement = data.form.indYearOnYearIncrement\n      this.form.indYearOnYearGrowth = data.form.indYearOnYearGrowth\n      this.form.indPreviousPeriodValue = data.form.indPreviousPeriodValue\n      this.form.indMonthOnMonthIncrement = data.form.indMonthOnMonthIncrement\n      this.form.indMonthOnMonthGrowth = data.form.indMonthOnMonthGrowth\n      this.form.indInitialValueOfTheYear = data.form.indInitialValueOfTheYear\n      this.form.indYearOnYearIncre = data.form.indYearOnYearIncre\n      this.form.indIncreaseOverTheBeginningOfTheYear = data.form.indIncreaseOverTheBeginningOfTheYear\n      this.form.indVerifyStatus = data.form.indVerifyStatus\n      this.form.indDeployStatus = data.form.indDeployStatus\n      this.form.indVerifyId = data.form.indVerifyId\n      this.form.tenant = data.form.tenant\n\n      let defRule = data.form.indDefRule;\n      if (defRule != null) {\n        let defRuleArr = defRule.split(\"||\");\n        if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n          this.form.indDefRule = defRuleArr[0]\n        } else {\n          this.form.indDefRule = defRule;\n        }\n      }\n      this.form.indDefRuleStr = data.form.indDefRuleStr;\n      this.indDefRuleStr = data.form.indDefRuleStr;\n      if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n        this.isSelfRule = true\n      } else {\n        this.isSelfRule = false\n      }\n      if(data.form.indDefRuleVal !=null && data.form.indDefRuleVal != \"\") {\n        this.form.indDefRuleVal = data.form.indDefRuleVal;\n        this.form.indDefRuleId = data.form.indDefRuleId;\n        this.indDefRuleVal = data.form.indDefRuleVal;\n        this.indDefRuleId = data.form.indDefRuleId;\n      } else {\n        if (defRule != null) {\n          let defRuleArr = defRule.split(\"||\");\n          if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n            this.form.indDefRuleVal = defRuleArr[1];\n            this.form.indDefRuleId = defRuleArr[2];\n            this.indDefRuleVal = defRuleArr[1];\n            this.indDefRuleId = defRuleArr[2];\n          }\n        }\n      }\n    },\n    [CRUD.HOOK.beforeSubmit]() {\n      // if (this.form.atomDimensions == null) {\n      //   this.crud.notify('请进行维度管理', CRUD.NOTIFICATION_TYPE.ERROR)\n      //   return false\n      // }\n      if(!this.isBizNameContract) {\n        this.$message.error(\"指标名称重复,请重新输入\");\n        return false;\n      }\n      //对新增状态进行参数设置\n      this.form.indDimAndValueRelations = [];\n      if (this.crud.status.add == CRUD.STATUS.PREPARED) {\n        this.form.indFrequency = this.form.indFrequency == null? null : Array.isArray(this.form.indFrequency)? this.form.indFrequency.join(\",\") : this.form.indFrequency\n        this.form.currency = this.form.currency == null? null : Array.isArray(this.form.currency)? this.form.currency.join(\",\") : this.form.currency\n        if(this.form.ieProp == 3) {\n          if (this.dimAndValueObject1.isShow) {\n            this.errmsgDim1 = this.dimAndValueObject1.dimension == null || this.dimAndValueObject1.dimension == '';\n            this.errmsgDimV1 = this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '';\n            if (this.errmsgDim1 || this.errmsgDimV1) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject1)\n          }\n          if (this.dimAndValueObject2.isShow) {\n            this.errmsgDimV2 = this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != ''\n                && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '');\n            if (this.errmsgDim2 || this.errmsgDimV2) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject2)\n          }\n          if (this.dimAndValueObject3.isShow) {\n            this.errmsgDimV3 = this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != ''\n                && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '');\n            if (this.errmsgDim3 || this.errmsgDimV3) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject3)\n          }\n          if (this.dimAndValueObject4.isShow) {\n            this.errmsgDimV4 = this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != ''\n                && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '');\n            if (this.errmsgDim4 || this.errmsgDimV4) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject4)\n          }\n          if (this.dimAndValueObject5.isShow) {\n            this.errmsgDimV5 = this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != ''\n                && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '');\n            if (this.errmsgDim5 || this.errmsgDimV5) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject5)\n          }\n          if (this.dimAndValueObject6.isShow) {\n            this.errmsgDimV6 = this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != ''\n                && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '');\n            if (this.errmsgDim6 || this.errmsgDimV6) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject6)\n          }\n          if (this.dimAndValueObject7.isShow) {\n            this.errmsgDimV7 = this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != ''\n                && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '');\n            if (this.errmsgDim7 || this.errmsgDimV7) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject7)\n          }\n          if (this.dimAndValueObject8.isShow) {\n            this.errmsgDimV8 = this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != ''\n                && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '');\n            if (this.errmsgDim8 || this.errmsgDimV8) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject8)\n          }\n          if (this.dimAndValueObject9.isShow) {\n            this.errmsgDimV9 = this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != ''\n                && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '');\n            if (this.errmsgDim9 || this.errmsgDimV9) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject9)\n          }\n          if (this.dimAndValueObject10.isShow) {\n            this.errmsgDimV10 = this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != ''\n                && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '');\n            if (this.errmsgDim10 || this.errmsgDimV10) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject10)\n          }\n        } else {\n          this.form.genBizName = null;\n        }\n        if(this.form.indInnerWarnValue != null && this.form.indInnerWarnValue != ''\n            && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n          this.errmsgInnerWarning = true\n        }\n        if(this.form.indMonWarnValue != null && this.form.indMonWarnValue != ''\n            && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n          this.errmsgMonWarning = true\n        }\n        if(this.errmsgInnerWarning || this.errmsgMonWarning) {\n          return false;\n        }\n        if(this.form.ieProp == 2) {\n          if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n            if(this.form.indDefRule == null || this.form.indDefRule == '') {\n              this.indDefRuleErr ='指标口径规则不能为空'\n              this.errmsgIndDefRule = true\n              return false\n            } else if(this.form.indDefRule.length > 500) {\n              this.indDefRuleErr ='长度不能超过500字符'\n              this.errmsgIndDefRule = true\n              return false;\n            } else {\n              this.indDefRuleErr ='指标口径规则不能为空'\n              this.errmsgIndDefRule = false\n            }\n          } else {\n            if(this.endsWithStr(this.indDefRuleStr)) {\n              this.indDefRuleErr ='口径规则表达式错误'\n              this.errmsgIndDefRule = true\n              return false\n            } else {\n              this.indDefRuleErr ='指标口径规则不能为空'\n              this.errmsgIndDefRule = false\n            }\n          }\n          this.form.indDefRule = (this.form.indDefRule + \"||\" + this.indDefRuleVal + \"||\" + this.indDefRuleId)\n          this.form.indDefRuleVal = this.indDefRuleVal;\n          this.form.indDefRuleStr = this.indDefRuleStr;\n          this.form.indDefRuleId = this.indDefRuleId;\n\n        } else {\n          this.indDefRuleErr ='指标口径规则不能为空'\n          this.errmsgIndDefRule = false\n        }\n        console.log('这里是新增参数编辑')\n      } else if (this.crud.status.edit == CRUD.STATUS.PREPARED) {\n        this.form.indFrequency = this.form.indFrequency == null? null : Array.isArray(this.form.indFrequency)? this.form.indFrequency.join(\",\") : this.form.indFrequency\n        this.form.currency = this.form.currency == null? null : Array.isArray(this.form.currency)? this.form.currency.join(\",\") : this.form.currency\n        //维度和维度值\n        console.log(this.form.indDimAndValueRelations)\n        //this.form.indDimAndValueRelations = [];\n        if(this.form.ieProp == 3) {\n          if (this.dimAndValueObject1.isShow) {\n            this.errmsgDim1 = this.dimAndValueObject1.dimension == null || this.dimAndValueObject1.dimension == '';\n            this.errmsgDimV1 = this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '';\n            if (this.errmsgDim1 || this.errmsgDimV1) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject1)\n          }\n          if (this.dimAndValueObject2.isShow) {\n            this.errmsgDimV2 = this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != ''\n                && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '');\n            if (this.errmsgDim2 || this.errmsgDimV2) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject2)\n          }\n          if (this.dimAndValueObject3.isShow) {\n            this.errmsgDimV3 = this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != ''\n                && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '');\n            if (this.errmsgDim3 || this.errmsgDimV3) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject3)\n          }\n          if (this.dimAndValueObject4.isShow) {\n            this.errmsgDimV4 = this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != ''\n                && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '');\n            if (this.errmsgDim4 || this.errmsgDimV4) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject4)\n          }\n          if (this.dimAndValueObject5.isShow) {\n            this.errmsgDimV5 = this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != ''\n                && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '');\n            if (this.errmsgDim5 || this.errmsgDimV5) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject5)\n          }\n          if (this.dimAndValueObject6.isShow) {\n            this.errmsgDimV6 = this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != ''\n                && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '');\n            if (this.errmsgDim6 || this.errmsgDimV6) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject6)\n          }\n          if (this.dimAndValueObject7.isShow) {\n            this.errmsgDimV7 = this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != ''\n                && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '');\n            if (this.errmsgDim7 || this.errmsgDimV7) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject7)\n          }\n          if (this.dimAndValueObject8.isShow) {\n            this.errmsgDimV8 = this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != ''\n                && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '');\n            if (this.errmsgDim8 || this.errmsgDimV8) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject8)\n          }\n          if (this.dimAndValueObject9.isShow) {\n            this.errmsgDimV9 = this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != ''\n                && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '');\n            if (this.errmsgDim9 || this.errmsgDimV9) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject9)\n          }\n          if (this.dimAndValueObject10.isShow) {\n            this.errmsgDimV10 = this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != ''\n                && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '');\n            if (this.errmsgDim10 || this.errmsgDimV10) {\n              return false;\n            }\n            this.form.indDimAndValueRelations.push(this.dimAndValueObject10)\n          }\n        } else {\n          this.form.genBizName = null;\n        }\n        if(this.form.indInnerWarnValue != null && this.form.indInnerWarnValue != ''\n            && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n          this.errmsgInnerWarning = true\n        }\n        if(this.form.indMonWarnValue != null && this.form.indMonWarnValue != ''\n            && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n          this.errmsgMonWarning = true\n        }\n        if(this.errmsgInnerWarning || this.errmsgMonWarning) {\n          return false;\n        }\n        if(this.form.ieProp == 2) {\n          if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n            if(this.form.indDefRule == null || this.form.indDefRule == '') {\n              this.indDefRuleErr ='指标口径规则不能为空'\n              this.errmsgIndDefRule = true\n              return false\n            } else {\n              this.indDefRuleErr ='指标口径规则不能为空'\n              this.errmsgIndDefRule = false\n            }\n          } else {\n            if(this.endsWithStr(this.indDefRuleStr)) {\n              this.indDefRuleErr ='口径规则表达式错误'\n              this.errmsgIndDefRule = true\n              return false\n            } else {\n              this.indDefRuleErr ='指标口径规则不能为空'\n              this.errmsgIndDefRule = false\n            }\n          }\n          this.form.indDefRule = (this.form.indDefRule + \"||\" + this.indDefRuleVal + \"||\" + this.indDefRuleId)\n          this.form.indDefRuleVal = this.indDefRuleVal;\n          this.form.indDefRuleStr = this.indDefRuleStr;\n          this.form.indDefRuleId = this.indDefRuleId;\n        } else {\n          this.indDefRuleErr ='指标口径规则不能为空'\n          this.errmsgIndDefRule = false\n        }\n      }\n    },\n    [CRUD.HOOK.beforeToAdd]() {\n      if (!this.form.categoryId) {\n        this.crud.notify('请选择分类', CRUD.NOTIFICATION_TYPE.ERROR)\n        return false\n      }\n      if (this.form.categoryId == '0') {\n        this.crud.notify('根节点不能添加', CRUD.NOTIFICATION_TYPE.ERROR)\n        return false\n      }\n      this.form.formType= 'add';\n      this.form.serialNo = this.generatorUUID();\n      this.form.categoryType = this.type\n      this.form.indDimAndValueRelations = []\n      this.indDefRuleStr = ''\n      this.indDefRuleVal = ''\n      this.indDefRuleId = ''\n      this.getCurrentDept()\n\n      this.cleanDimAndVal();\n    },\n    cleanDimAndVal() {\n      this.dimAndValueObject1 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject2 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject3 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject4 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject5 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject6 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject7 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject8 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject9 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n      this.dimAndValueObject10 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      }\n    },\n    // 历史版本\n    toSelectHistory(data) {\n      this.showIndHistory = true\n      //this.hisIeId = data.id;\n      //this.historyData.push(data)\n      getHisList(data.id).then(res => {\n        if(res.code == 0) {\n          this.historyData=res.data.records\n          console.log(this.historyData)\n\n        }\n      })\n    },\n    toSelectFlow(data) {\n      this.showFlow = true\n      /*approveDetailByBusinessKey(qs.stringify({businessKey:data.id})).then(res => {\n        //审批流程\n        this.flowData = res.data\n      })*/\n      approveDetailByOriginalInstId(qs.stringify({originalInstId:data.indVerifyId})).then(res => {\n        //审批流程\n        this.flowData = res.data\n      })\n    },\n    toResult(data){\n      this.$router.push({path: 'result/index',query:{ieName:data.bizName}});\n    },\n    // 历史详情\n    toSelectHistoryDetail(data) {\n      const _thisAtom = this.$refs.atomPage\n      _thisAtom.form = data\n      _thisAtom.title = data.bizName + '[' + data.bizCode + ']历史详情'\n      const param = {\n        bizCode: data.bizCode,\n        keepHistory: data.keepHistory\n      }\n      getDimensions(param).then(data => {\n        _thisAtom.atomDimensions = data.data\n      })\n      getDimInfo().then(data => {\n        _thisAtom.dimensions = data.data\n      })\n      // 获取数据源\n      getAllSource().then(data => {\n        _thisAtom.sourceData = [{ id: 'local', datasourceName: '默认数据源' }].concat(data.data)\n      })\n      _thisAtom.form.currency = data.currency == null ? null : Array.isArray(data.currency) ? data.currency : data.currency.split(\",\")\n      _thisAtom.form.indValueType = data.indValueType\n      _thisAtom.form.indFrequency = data.indFrequency == null ? null : Array.isArray(data.indFrequency) ? data.indFrequency : data.indFrequency.split(\",\")\n\n      _thisAtom.dimAndValueObject1.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[0]==null? false : true\n      _thisAtom.dimAndValueObject1.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[0]==null? null : data.indDimAndValueRelations[0].dimension\n      _thisAtom.dimAndValueObject1.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[0]==null? null : data.indDimAndValueRelations[0].dimensionValue\n      _thisAtom.dimAndValueObject1.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[0]==null? null : data.indDimAndValueRelations[0].dimensionName\n\n      _thisAtom.dimAndValueObject2.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[1]==null? false : true\n      _thisAtom.dimAndValueObject2.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[1]==null? null : data.indDimAndValueRelations[1].dimension\n      _thisAtom.dimAndValueObject2.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[1]==null? null : data.indDimAndValueRelations[1].dimensionValue\n      _thisAtom.dimAndValueObject2.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[1]==null? null : data.indDimAndValueRelations[1].dimensionName\n\n      _thisAtom.dimAndValueObject3.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[2]==null? false : true\n      _thisAtom.dimAndValueObject3.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[2]==null? null : data.indDimAndValueRelations[2].dimension\n      _thisAtom.dimAndValueObject3.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[2]==null? null : data.indDimAndValueRelations[2].dimensionValue\n      _thisAtom.dimAndValueObject3.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[2]==null? null : data.indDimAndValueRelations[2].dimensionName\n\n      _thisAtom.dimAndValueObject4.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[3]==null? false : true\n      _thisAtom.dimAndValueObject4.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[3]==null? null : data.indDimAndValueRelations[3].dimension\n      _thisAtom.dimAndValueObject4.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[3]==null? null : data.indDimAndValueRelations[3].dimensionValue\n      _thisAtom.dimAndValueObject4.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[3]==null? null : data.indDimAndValueRelations[3].dimensionName\n\n      _thisAtom.dimAndValueObject5.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[4]==null? false : true\n      _thisAtom.dimAndValueObject5.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[4]==null? null : data.indDimAndValueRelations[4].dimension\n      _thisAtom.dimAndValueObject5.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[4]==null? null : data.indDimAndValueRelations[4].dimensionValue\n      _thisAtom.dimAndValueObject5.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[4]==null? null : data.indDimAndValueRelations[4].dimensionName\n\n      _thisAtom.dimAndValueObject6.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[5]==null? false : true\n      _thisAtom.dimAndValueObject6.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[5]==null? null : data.indDimAndValueRelations[5].dimension\n      _thisAtom.dimAndValueObject6.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[5]==null? null : data.indDimAndValueRelations[5].dimensionValue\n      _thisAtom.dimAndValueObject6.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[5]==null? null : data.indDimAndValueRelations[5].dimensionName\n\n      _thisAtom.dimAndValueObject7.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[6]==null? false : true\n      _thisAtom.dimAndValueObject7.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[6]==null? null : data.indDimAndValueRelations[6].dimension\n      _thisAtom.dimAndValueObject7.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[6]==null? null : data.indDimAndValueRelations[6].dimensionValue\n      _thisAtom.dimAndValueObject7.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[6]==null? null : data.indDimAndValueRelations[6].dimensionName\n\n      _thisAtom.dimAndValueObject8.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[7]==null? false : true\n      _thisAtom.dimAndValueObject8.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[7]==null? null : data.indDimAndValueRelations[7].dimension\n      _thisAtom.dimAndValueObject8.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[7]==null? null : data.indDimAndValueRelations[7].dimensionValue\n      _thisAtom.dimAndValueObject8.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[7]==null? null : data.indDimAndValueRelations[7].dimensionName\n\n      _thisAtom.dimAndValueObject9.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[8]==null? false : true\n      _thisAtom.dimAndValueObject9.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[8]==null? null : data.indDimAndValueRelations[8].dimension\n      _thisAtom.dimAndValueObject9.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[8]==null? null : data.indDimAndValueRelations[8].dimensionValue\n      _thisAtom.dimAndValueObject9.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[8]==null? null : data.indDimAndValueRelations[8].dimensionName\n\n      _thisAtom.dimAndValueObject10.isShow = data.indDimAndValueRelations.length == 0 ?\n          false : data.indDimAndValueRelations[9]==null? false : true\n      _thisAtom.dimAndValueObject10.dimension = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[9]==null? null : data.indDimAndValueRelations[9].dimension\n      _thisAtom.dimAndValueObject10.dimensionValue = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[9]==null? null : data.indDimAndValueRelations[9].dimensionValue\n      _thisAtom.dimAndValueObject10.dimensionName = data.indDimAndValueRelations.length == 0 ?\n          null : data.indDimAndValueRelations[9]==null? null : data.indDimAndValueRelations[9].dimensionName\n\n      let defRule = data.indDefRule;\n      if (defRule != null) {\n        let defRuleArr = defRule.split(\"||\");\n        if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n          _thisAtom.form.indDefRule = defRuleArr[0]\n        } else {\n          _thisAtom.form.indDefRule = defRule;\n        }\n      }\n      _thisAtom.form.indDefRuleStr = data.indDefRuleStr;\n      _thisAtom.indDefRuleStr = data.indDefRuleStr;\n      if(_thisAtom.indDefRuleStr == null || _thisAtom.indDefRuleStr == '') {\n        this.isSelfRule = true\n      } else {\n        this.isSelfRule = false\n      }\n      if(data.indDefRuleVal !=null && data.indDefRuleVal != \"\") {\n        _thisAtom.form.indDefRuleVal = data.indDefRuleVal;\n        _thisAtom.form.indDefRuleId = data.indDefRuleId;\n        _thisAtom.indDefRuleVal = data.indDefRuleVal;\n        _thisAtom.indDefRuleId = data.indDefRuleId;\n      } else {\n        if (defRule != null) {\n          let defRuleArr = defRule.split(\"||\");\n          if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n            _thisAtom.form.indDefRuleVal = defRuleArr[1];\n            _thisAtom.form.indDefRuleId = defRuleArr[2];\n            _thisAtom.indDefRuleVal = defRuleArr[1];\n            _thisAtom.indDefRuleId = defRuleArr[2];\n          }\n        }\n      }\n      /* _this.bizCode = data.bizCode*/\n      _thisAtom.atomPageDialog = true\n    },\n    bizTabCodeChange() {\n      this.bizTabCodeDis = this.form.bizTabCode == null;\n    },\n    atomDimensionHandle() {\n\n      if (this.form.bizCalcSql != null) {\n\n        const _this = this.$refs.dimensionPage\n        _this.keepHistory = this.form.keepHistory\n        if (this.form.bizTabCode == null) {\n          this.bizTabCodeDis = true\n        }\n        /* const paramSql = {\n          bizCalcSql: this.form.bizCalcSql\n        }\n        bizCalcSqlVali(paramSql).then(data => {\n          if (data.code == 0) {\n\n          } else {\n            this.$message(data.msg)\n          }\n        })*/\n        const param = {\n          bizCalcSql: this.form.bizCalcSql,\n          bizCode: this.form.bizCode,\n          keepHistory: this.form.keepHistory,\n          bizTabCode: this.form.bizTabCode,\n          targetDataSource: this.form.targetDataSource\n        }\n        getDimensions(param).then(data => {\n          if (data.code == 0) {\n            _this.atomDimensions = data.data\n            _this.dimensionDialog = true\n          } else {\n            this.$message(data.msg)\n          }\n        })\n        getDimInfo().then(data => {\n          _this.dimensions = data.data\n        })\n        /* const colParam = {\n          'id': this.form.targetDataSource,\n          'tablename': this.form.bizTabCode\n          /!* 'data_type': this.form.filterColumn*!/\n        }*/\n        if (this.form.bizTabCode != null) {\n          getColumnByTabel(this.form.targetDataSource, this.form.bizTabCode).then(data => {\n            _this.colCodes = data.data\n          })\n          /* getColumns(colParam).then(data => {\n            if (data.code == 0) {\n              _this.colCodes = data.data\n              console.log(data.data)\n            } else {\n              _this.colCodes = []\n              alert('数据源连接错误')\n            }\n          })*/\n        } else {\n          this.bizTabCodeDis = true\n        }\n      }\n    },\n    // 接收维度信息\n    getAtomDimensions(data) {\n      this.form.atomDimensions = data\n    },\n    handleCategoryClick(data) {\n      console.log(data)\n      this.crud.form.categoryId = data.id\n      this.crud.query.categoryIds = data.childrenIds\n      this.crud.query.categoryType = data.categoryType\n      this.query.categoryType = data.categoryType\n      this.categoryType = data.categoryType\n      this.crud.query.categoryId = data.id\n      this.form.categoryId = data.id\n      this.form.tenant = data.tenant\n      const parentId = data.parentId;\n      if(parentId == null) {\n        this.crud.optShow.add = false;\n        this.crud.form.indFirstType = data.id;\n        this.initIndSecondType(data.id,'form');\n      } else if(parentId == '0') {\n        if(data.categoryType == 0) {\n          this.crud.optShow.add = true;\n        }\n        this.crud.form.indFirstType = data.id;\n        this.initIndSecondType(data.id,'form');\n      } else {\n        if(data.categoryType == 0) {\n          this.crud.optShow.add = true;\n        }\n        this.crud.form.indFirstType = data.parentId;\n        this.initIndSecondType(data.parentId,'form');\n        this.crud.form.indSecondType = data.id;\n      }\n      this.initDimInfos(2)\n      this.crud.refresh()\n    },\n    // 数据源发生变化时查询对应的数据源下的表\n    dataSourceChangeHandle(val) {\n      this.form.bizTabCode = null\n      /* const param = {\n        id: val\n      }\n      getTables(param).then(data => {\n        this.tableInfo = data.data\n      })*/\n      // 通过数据源id查询表\n      getTablesById(val).then(data => {\n        this.tableInfo = data.data\n      })\n    },\n    toSourceDataName(row) {\n      let name = ''\n      this.sourceData.forEach(row1 => {\n        if (row1.id == row.sourceDataSource) {\n          name = row1.datasourceName\n        }\n      })\n      return name\n    },\n    toTargetDataName(row) {\n      let name = ''\n      this.sourceData.forEach(row1 => {\n        if (row1.id == row.targetDataSource) {\n          name = row1.datasourceName\n        }\n      })\n      return name\n    },\n    /** 点击计算按钮触发 */\n    processA(data) {\n      const bizCodes = []\n      for (let i = 0; i < data.length; i++) {\n        bizCodes.push(data[i].bizCode)\n      }\n      this.processParam.codes = bizCodes\n      this.processDialog = true\n    },\n    processB() {\n      if (this.dateValue == '') {\n        this.crud.notify('日期不能为空', CRUD.NOTIFICATION_TYPE.ERROR)\n      } else {\n        this.processParam.periodDate = this.dateFormat(this.dateValue, 'YYYYMMDD')\n        process(this.processParam, 'atom').then(data => {\n          if (data.code == 0) {\n            this.crud.notify(data.msg, CRUD.NOTIFICATION_TYPE.SUCCESS)\n          } else {\n            this.crud.notify(data.msg, CRUD.NOTIFICATION_TYPE.ERROR)\n          }\n          this.processDialog = false\n        })\n      }\n    },\n    // 新增维度\n    addDimension() {\n      this.dimension.classificationId = null\n      this.dimension.categoryName = null\n      this.dimension.remarks = null\n      this.dimension.serialNo = this.form.serialNo\n      this.showIndDimensionAdd = true\n    },\n    // 新增维度值\n    addDimensionValue() {\n      this.initDimInfos(2)\n     /* this.dimensionValue.dimInfoId = null\n      this.dimensionValue.lastLevelDimValueId = null\n      this.dimensionValue.categoryName = null*/\n      this.dimensionValue.serialNo = this.form.serialNo\n      this.showIndDimensionValueAdd = true\n    },\n    // 新增维度和维度值\n    addDimensionAndValue() {\n      if(this.dimensionNumber >= 10){\n        return;\n      }\n      this.dimensionArr.push(++this.dimensionNumber)\n      this.dimensionArr = this.uniqueArr(this.dimensionArr)\n      if(this.dimensionNumber == 3) {\n        this.dimAndValueObject3.isShow = true\n      } else if(this.dimensionNumber == 4) {\n        this.dimAndValueObject4.isShow = true\n      } else if(this.dimensionNumber == 5) {\n        this.dimAndValueObject5.isShow = true\n      } else if(this.dimensionNumber == 6) {\n        this.dimAndValueObject6.isShow = true\n      } else if(this.dimensionNumber == 7) {\n        this.dimAndValueObject7.isShow = true\n      } else if(this.dimensionNumber == 8) {\n        this.dimAndValueObject8.isShow = true\n      } else if(this.dimensionNumber == 9) {\n        this.dimAndValueObject9.isShow = true\n      } else if(this.dimensionNumber == 10) {\n        this.dimAndValueObject10.isShow = true\n      }\n      // this.dimensionArr.push({ id: ++this.dimensionNumber, value: { dimension: null, dimensionValue: null } })\n    },\n    // 删除维度和维度值\n    deleteDimensionAndValue(item) {\n      this.dimensionArr.splice(this.dimensionArr.indexOf(item), 1);\n      if(item == 1) {\n        this.dimAndValueObject1 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n\n      } else if(item == 2) {\n        this.dimAndValueObject2 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 3) {\n        this.dimAndValueObject3 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 4) {\n        this.dimAndValueObject4 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 5) {\n        this.dimAndValueObject5 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 6) {\n        this.dimAndValueObject6 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 7) {\n        this.dimAndValueObject7 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 8) {\n        this.dimAndValueObject8 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 9) {\n        this.dimAndValueObject9 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      } else if(item == 10) {\n        this.dimAndValueObject10 = {\n          isShow: false,\n          dimension: null,\n          dimensionValue: null,\n          dimensionName: null\n        }\n      }\n      this.dimensionNumber =2;\n    },\n    // 数组去重\n    uniqueArr(arr){\n      var x = new Set(arr);\n      return [...x];\n    },\n    // 衍生指标编辑指标口径规则\n    showIndDefRuleDialog() {\n      // this.indDefRuleStr = ''\n      this.value = []\n      this.showIndDefRule = true\n    },\n    // 关闭衍生指标编辑指标口径规则\n    closeIndDefRuleDialog() {\n      this.showIndDefRule = false\n    },\n    handleChange(value, direction, movedKeys) {\n      //value = value.toString();\n      //direction = direction.toString();\n      //value = value.substring(value.lastIndexOf(\",\")+1,value.length).trim();\n        /*if(value == \"true\" && direction == \"right\"){\n            this.$message({\n              message: '该指标结果可能存在补录，请确认是否引用！',\n              type: 'warning'\n            });\n        }*/\n    },\n    // 新增指标内部警戒值（表示预警）\n    addIndInnerWarnValue() {\n      this.indInnerWarnValueArr.push(++this.indInnerWarnValueNumber)\n      this.indInnerWarnValueArr = this.uniqueArr(this.indInnerWarnValueArr)\n    },\n    // 删除指标内部警戒值（表示预警）\n    delIndInnerWarnValue(item) {\n      this.indInnerWarnValueArr.splice(this.indInnerWarnValueArr.indexOf(item), 1);\n      this.indInnerWarnValueNumber = 1\n    },\n    // 新增指标内部警戒值（表示通过）\n    addIndInnerWarnPassValue() {\n      this.indInnerWarnPassValueArr.push(++this.indInnerWarnPassValueNumber)\n      this.indInnerWarnPassValueArr = this.uniqueArr(this.indInnerWarnPassValueArr)\n    },\n    // 删除指标内部警戒值（表示通过）\n    delIndInnerWarnPassValue(item) {\n      this.indInnerWarnPassValueArr.splice(this.indInnerWarnPassValueArr.indexOf(item), 1);\n      this.indInnerWarnPassValueNumber = 1\n    },\n    // 新增指标监管警戒值（表示预警）\n    addIndMonWarnValue() {\n      this.indMonWarnValueArr.push(++this.indMonWarnValueNumber)\n      this.indMonWarnValueArr = this.uniqueArr(this.indMonWarnValueArr)\n    },\n    // 删除指标监管警戒值（表示预警）\n    delIndMonWarnValue(item) {\n      this.indMonWarnValueArr.splice(this.indMonWarnValueArr.indexOf(item), 1);\n      this.indMonWarnValueNumber = 1\n    },\n    // 新增指标监管警戒值（表示通过）\n    addIndMonWarnPassValue() {\n      this.indMonWarnPassValueArr.push(++this.indMonWarnPassValueNumber)\n      this.indMonWarnPassValueArr = this.uniqueArr(this.indMonWarnPassValueArr)\n    },\n    // 删除指标监管警戒值（表示通过）\n    delIndMonWarnPassValue(item) {\n      this.indMonWarnPassValueArr.splice(this.indMonWarnPassValueArr.indexOf(item), 1);\n      this.indMonWarnPassValueNumber = 1\n    },\n    commitAtomWithSign() {\n      this.$refs['signform'].validate(valid => {\n        console.log(\"this.sign.signDeptId  \" + this.sign.signDeptId)\n        console.log(\"valid is\" + valid)\n        if (!valid) {\n          return;\n        }\n        if(this.sign.signDeptId != null && this.sign.signDeptId != '' &&  this.sign.signDeptId != 'null'  && this.sign.signDeptId != 'undefined') {\n          checkDeptUser(this.sign.signDeptId).then(res => {\n            if(res.code == \"0000\") {\n              if(this.sign.oprType == 1) {//新增\n                this.crud.form.signDeptIds = this.sign.signDeptId;\n                this.crud.submitCU();\n              } else if(this.sign.oprType == 2) {//修改\n                this.crud.form.signDeptIds = this.sign.signDeptId;\n                this.crud.submitCU();\n              } else if(this.sign.oprType == 3) {//发起审批流程\n                this.startProcessVerify(this.sign.data);\n              } else if(this.sign.oprType == 4) {//删除\n                this.sign.data.signDeptIds = this.sign.signDeptId;\n                this.abolishSingleAtom(this.sign.data);\n              } else if(this.sign.oprType == 5) {//废止\n                this.submitCacelInd(this.sign.data,this.sign.signDeptId);\n              }\n              this.closeSignDialog();\n            } else {\n              this.$notify({\n                title: res.msg,\n                type: 'error',\n                duration: 2500\n              })\n            }\n          })\n        } else {\n          if(this.sign.oprType == 1) {//新增\n            this.crud.form.signDeptIds = this.sign.signDeptId;\n            this.crud.submitCU();\n          } else if(this.sign.oprType == 2) {//修改\n            this.crud.form.signDeptIds = this.sign.signDeptId;\n            this.crud.submitCU();\n          } else if(this.sign.oprType == 3) {//发起审批流程\n            this.startProcessVerify(this.sign.data);\n          } else if(this.sign.oprType == 4) {//删除\n            this.sign.data.signDeptIds = this.sign.signDeptId;\n            this.abolishSingleAtom(this.sign.data);\n          } else if(this.sign.oprType == 5) {//废止\n            this.submitCacelInd(this.sign.data,this.sign.signDeptId);\n          }\n          this.closeSignDialog();\n        }\n      });\n\n    },\n    // 废止指标\n    cancelInd(data) {\n      let newIeArr = 0;\n      let unNewIeArr = 0;\n      if(data == null && !Array.isArray(data)) return;\n      let ids = \"\";\n      for(let i = 0; i < data.length; i++) {\n        const indVerifyStatus = data[i].indVerifyStatus;\n        const indDeployStatus = data[i].indDeployStatus;\n        const bizCode = data[i].bizCode;\n        if(indVerifyStatus == '2') {\n          this.$notify({\n            title: '审批中的指标不能废止',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if(indDeployStatus == '3') {\n          this.$notify({\n            title: '已废止的指标不能再次废止',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if(indDeployStatus == '1') {\n          newIeArr += 1;\n        } else {\n          unNewIeArr += 1;\n        }\n        ids += data[i].id + \",\";\n      }\n      if(ids != null && ids.includes(\",\")) {\n        ids = ids.substr(0,ids.length - 1);\n      }\n      if(newIeArr > 0 && unNewIeArr > 0) {\n        this.$notify({\n          title: '请选择审批状态一致的指标操作',\n          type: 'error',\n          duration: 2500\n        })\n        return;\n      } else if(newIeArr == 0 && unNewIeArr == 0) {\n        this.$notify({\n          title: '请选择指标记录再操作',\n          type: 'error',\n          duration: 2500\n        })\n        return;\n      }\n      checkRef(ids).then(res => {\n        if(res.code == 0) {\n          if(res.data == false) {\n            if(newIeArr > 0 && unNewIeArr == 0){ //批量删除\n              //批量删除\n              this.$confirm('确认删除指标?', '删除指标', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }).then(() => {\n                defaultCrud.delAllLoading = true\n                delAtom(ids).then(res => {\n                  if(res.code == 0) {\n                    this.$notify({\n                      title: '指标删除成功',\n                      type: 'success',\n                      duration: 2500\n                    })\n                  } else {\n                    this.$notify({\n                      title: '指标删除失败',\n                      type: 'error',\n                      duration: 2500\n                    })\n                  }\n                  this.crud.refresh();\n                })\n              }).catch(() => {})\n            }else if(newIeArr == 0 && unNewIeArr > 0) {//批量废止\n              this.openSignDialog(ids,5,'发起废止流程','请确认是否发起指标废止流程? ');\n            }\n\n          } else {\n            this.$notify({title: '该指标已被引用，不能删除或废止！',type: 'error',duration: 2500})\n\n          }\n\n        } else {\n          this.$notify({title: '删除或废止失败！',type: 'error',duration: 2500})\n\n        }\n      })\n    },\n    submitCacelInd(ids,signDeptId) {\n      //批量废止\n      abolish(ids,signDeptId).then(res => {\n        if(res.code == 0) {\n          this.$notify({\n            title: '发起指标废止流程成功',\n            type: 'success',\n            duration: 2500\n          })\n        } else {\n          this.$notify({\n            title: '发起指标废止流程失败',\n            type: 'error',\n            duration: 2500\n          })\n        }\n        this.crud.refresh();\n      })\n\n    },\n    // 指标发起审批\n    processVerify(data) {\n      if(data == null && !Array.isArray(data)) return;\n      let newIeArr = 0;\n      let unNewIeArr = 0;\n      let ids = \"\";\n      for(let i = 0; i < data.length; i++) {\n        const indVerifyStatus = data[i].indVerifyStatus;\n        const indDeployStatus = data[i].indDeployStatus\n        if(indDeployStatus == '1') {\n          newIeArr += 1;\n        } else {\n          unNewIeArr += 1;\n        }\n        if(newIeArr > 0 && unNewIeArr > 0) {\n          this.$notify({\n            title: '请选择发布状态一致的指标操作',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if(indVerifyStatus == '2') {\n          this.$notify({\n            title: '审批中的指标不能重复发起审批',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if(indVerifyStatus == '3') {\n          this.$notify({\n            title: '已拒绝的指标不能发起审批',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if(indVerifyStatus == '4') {\n          this.$notify({\n            title: '已审批通过的指标不能发起审批',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if(indDeployStatus == '3') {\n          this.$notify({\n            title: '已废止的指标不能发起审批',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        ids += data[i].id + \",\";\n      }\n      if(ids != null && ids.includes(\",\")) {\n        ids = ids.substr(0,ids.length - 1);\n      }\n      this.openSignDialog(ids,3,'发起审批流程','是否发起审批? ');\n    },\n    openSignDialog(data,oprType,title,msg) {\n      this.showSign = true\n      this.showSignOrg = false\n      this.sign.signDeptId = null\n      this.sign.signDeptName =null\n      this.sign.isSign='0'\n      this.sign.data =data;\n      this.sign.oprType = oprType\n      this.sign.title=title\n      this.sign.msg = msg\n    },\n    startProcessVerify(ids) {\n      startProcess(ids,this.sign.signDeptId).then(res => {\n        if(res.code == 0) {\n          this.$notify({\n            title: '发起审批请求成功',\n            type: 'success',\n            duration: 2500\n          })\n        } else {\n          this.$notify({\n            title: '发起审批请求失败',\n            type: 'error',\n            duration: 2500\n          })\n        }\n        this.crud.refresh();\n      })\n    },\n    // 关闭指标历史版本弹框\n    closeIndHistoryDialog() {\n      this.historyData=[];\n      this.showIndHistory = false\n    },\n    //关闭流程查看弹框\n    closeFlowDialog(){\n      this.flowData=[];\n      this.showFlow = false\n    },\n    // 关闭维度新增弹框\n    closeIndDimensionAddDialog() {\n      this.showIndDimensionAdd = false\n    },\n    // 确认提交新增维度\n    commitDim() {\n      this.$refs['dimform'].validate(valid => {\n        if (!valid) {\n          return;\n        }\n        this.dimension.status = '1';\n        this.dimension.tenant = this.form.tenant;\n        this.dimension.serialNo = this.form.serialNo\n        crudIndDimInfo.crud.add(this.dimension).then(data => {\n          if (data.code && data.code != 0) {\n            this.$notify({\n              title: data.msg,\n              type: 'error',\n              duration: 2500\n            })\n            this.showIndDimensionAdd = false\n          } else {\n            this.$notify({\n              title: '新增成功',\n              type: 'success',\n              duration: 2500\n            })\n            this.initDimInfos(2)\n            this.showIndDimensionAdd = false\n          }\n        })\n      });\n    },\n    // 关闭维度值新增弹框\n    closeIndDimensionValueAddDialog() {\n      this.showIndDimensionValueAdd = false\n    },\n    // 确认提交新增维度值\n    commitDimValue() {\n      this.$refs['dimValform'].validate(valid => {\n        console.log(\"valid is\" + valid)\n        if (!valid) {\n          return;\n        }\n        if (this.dimensionValue.dimInfoId == null || this.dimensionValue.dimInfoId.length == 0) {\n          this.$notify({\n            title: '所属维度不能为空',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n        if (this.dimensionValue.categoryName == null || this.dimensionValue.categoryName.length == 0) {\n          this.$notify({\n            title: '指标维度值不能为空',\n            type: 'error',\n            duration: 2500\n          })\n          return;\n        }\n\n        this.dimensionValue.status = 1;\n        this.dimensionValue.tenant = this.form.tenant;\n        this.dimension.serialNo = this.form.serialNo\n        crudIndDimVal.crud.add(this.dimensionValue).then(data => {\n          if (data.code && data.code != 0) {\n            this.$notify({\n              title: data.msg,\n              type: 'error',\n              duration: 2500\n            })\n            this.showIndDimensionValueAdd = false\n          } else {\n            this.$notify({\n              title: '新增成功',\n              type: 'success',\n              duration: 2500\n            })\n            this.initDimValues(2)\n            this.showIndDimensionValueAdd = false\n          }\n        })\n      });\n    },\n    // 选择指标进行规则拼接\n    selectInd() {\n      if(this.value.length  == 0) {\n        this.$message({\n          message: '请选择一个指标！',\n          type: 'error'\n        });\n        return;\n      }\n      if(this.value.length > 1) {\n        this.$message({\n          message: '只能选择一个指标！',\n          type: 'error'\n        });\n        return;\n      }\n      let keyLabel = this.value[0];\n      let keyArr = keyLabel.split(\",\");\n      let hasRef = keyArr[2];\n      if(hasRef == \"true\" ){\n        this.$message({\n          message: '该指标结果可能存在补录，请确认是否引用！',\n          type: 'warning'\n        });\n      }\n      if(this.indDefRuleStr != null\n          && (this.endsWithStr(this.indDefRuleStr))) {\n        this.indDefRuleStr += '[' + keyArr[1] + ']';\n        this.indDefRuleId += keyArr[0];\n        this.indDefRuleVal += keyArr[3];\n      } else {\n        this.indDefRuleStr = '[' + keyArr[1] + ']';\n        this.indDefRuleId += keyArr[0];\n        this.indDefRuleVal = keyArr[3];\n      }\n      this.showIndDefRule = false\n      //this.hasCalc = false;\n      this.rules.indDefRule.required = false\n      if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n        if(this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.errmsgIndDefRule = true\n        } else {\n          this.errmsgIndDefRule = false\n        }\n\n      } else {\n        this.errmsgIndDefRule = false\n      }\n      this.form.indDefRule = this.indDefRuleStr\n    },\n    // 指标规则+号按钮\n    indDefRulePlus() {\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\n          && !this.beginWithStr(this.indDefRuleStr) ){\n\n\n        if(this.endsWithStr(this.indDefRuleStr)) {\n          this.indDefRuleStr = this.indDefRuleStr.substring(0,this.indDefRuleStr.length - 3) + ' + '\n          this.indDefRuleVal = this.indDefRuleVal.substring(0,this.indDefRuleVal.length - 3) + ' + '\n          this.indDefRuleId = this.indDefRuleId.substring(0,this.indDefRuleId.length - 3) + ' + '\n        } else {\n          this.indDefRuleStr += ' + '\n          this.indDefRuleVal += ' + '\n          this.indDefRuleId += ' + '\n        }\n\n        this.form.indDefRule = this.indDefRuleStr\n      }\n    },\n    // 指标规则-号按钮\n    indDefRuleSubtraction() {\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\n          && !this.beginWithStr(this.indDefRuleStr) ){\n        if(this.endsWithStr(this.indDefRuleStr)) {\n          this.indDefRuleStr = this.indDefRuleStr.substring(0,this.indDefRuleStr.length - 3) + ' - '\n          this.indDefRuleVal = this.indDefRuleVal.substring(0,this.indDefRuleVal.length - 3) + ' - '\n          this.indDefRuleId = this.indDefRuleId.substring(0,this.indDefRuleId.length - 3) + ' - '\n        } else {\n          this.indDefRuleStr += ' - '\n          this.indDefRuleVal += ' - '\n          this.indDefRuleId += ' - '\n        }\n\n        this.form.indDefRule = this.indDefRuleStr\n      }\n    },\n    // 指标规则×号按钮\n    indDefRuleMultiplication() {\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\n          && !this.beginWithStr(this.indDefRuleStr) ) {\n\n        if(this.endsWithStr(this.indDefRuleStr)) {\n          this.indDefRuleStr = this.indDefRuleStr.substring(0,this.indDefRuleStr.length - 3) + ' × '\n          this.indDefRuleVal = this.indDefRuleVal.substring(0,this.indDefRuleVal.length - 3) + ' × '\n          this.indDefRuleId = this.indDefRuleId.substring(0,this.indDefRuleId.length - 3) + ' × '\n        } else {\n          this.indDefRuleStr += ' × '\n          this.indDefRuleVal += ' × '\n          this.indDefRuleId += ' × '\n        }\n        this.form.indDefRule = this.indDefRuleStr\n      }\n    },\n    // 指标规则/号按钮\n    indDefRuleDivision() {\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\n          && !this.beginWithStr(this.indDefRuleStr)){\n        if(this.endsWithStr(this.indDefRuleStr)) {\n          this.indDefRuleStr = this.indDefRuleStr.substring(0,this.indDefRuleStr.length - 3) + ' / '\n          this.indDefRuleVal = this.indDefRuleVal.substring(0,this.indDefRuleVal.length - 3) + ' / '\n          this.indDefRuleId = this.indDefRuleId.substring(0,this.indDefRuleId.length - 3) + ' / '\n        } else {\n          this.indDefRuleStr += ' / '\n          this.indDefRuleVal += ' / '\n          this.indDefRuleId += ' / '\n        }\n\n        this.form.indDefRule = this.indDefRuleStr\n      }\n    },\n    changeDimVal1(val){\n      if(val == null || val == '') {\n        this.errmsgDimV1=true;\n      } else{\n        this.errmsgDimV1=false;\n        this.dimAndValueObject1.dimensionValue= ''\n      }\n    },\n    changeDimVal2(val){\n      if(this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV2=true;\n      } else{\n        this.errmsgDimV2=false;\n        this.dimAndValueObject2.dimensionValue= ''\n      }\n    },\n    changeDimVal3(val){\n      if(this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV3=true;\n      } else{\n        this.errmsgDimV3=false;\n        this.dimAndValueObject3.dimensionValue= ''\n      }\n    },\n    changeDimVal4(val){\n      if(this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV4=true;\n      } else{\n        this.errmsgDimV4=false;\n        this.dimAndValueObject4.dimensionValue= ''\n      }\n    },\n    changeDimVal5(val){\n      if(this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV5=true;\n      } else{\n        this.errmsgDimV5=false;\n        this.dimAndValueObject5.dimensionValue= ''\n      }\n    },\n    changeDimVal6(val){\n      if(this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV6=true;\n      } else{\n        this.errmsgDimV6=false;\n        this.dimAndValueObject6.dimensionValue= ''\n      }\n    },\n    changeDimVal7(val){\n      if(this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV7=true;\n      } else{\n        this.errmsgDimV7=false;\n        this.dimAndValueObject7.dimensionValue= ''\n      }\n    },\n    changeDimVal8(val){\n      if(this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV8=true;\n      } else{\n        this.errmsgDimV8=false;\n        this.dimAndValueObject8.dimensionValue= ''\n      }\n    },\n    changeDimVal9(val){\n      if(this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV9=true;\n      } else{\n        this.errmsgDimV9=false;\n        this.dimAndValueObject9.dimensionValue= ''\n      }\n    },\n    changeDimVal10(val){\n      if(this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != '' && (val == null || val == '')) {\n        this.errmsgDimV10=true;\n      } else{\n        this.errmsgDimV10=false;\n        this.dimAndValueObject10.dimensionValue= ''\n      }\n    },\n    handleDimValueClick1(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName1.push(data.categoryName)\n        this.dimensionTmpName1 = this.uniqueArr(this.dimValueTmpName1)\n        this.dimValueTmp1.push(data.id)\n        this.dimensionTmp1 = this.uniqueArr(this.dimValueTmp1)\n      }else{\n        this.dimValueTmpName1.splice(this.dimValueTmpName1.indexOf(data.categoryName),1)\n        this.dimensionTmpName1 = this.uniqueArr(this.dimValueTmpName1)\n        this.dimValueTmp1.splice(this.dimValueTmp1.indexOf(data.id),1)\n        this.dimensionTmp1 = this.uniqueArr(this.dimValueTmp1)\n      }\n      this.dimAndValueObject1.dimensionName = this.dimensionTmpName1.join(',')\n      this.dimAndValueObject1.dimensionValue = this.dimensionTmp1.join(',')\n      this.errmsgDimV1 = this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '';\n    },\n    handleDimValueClick2(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName2.push(data.categoryName)\n        this.dimensionTmpName2 = this.uniqueArr(this.dimValueTmpName2)\n        this.dimValueTmp2.push(data.id)\n        this.dimensionTmp2 = this.uniqueArr(this.dimValueTmp2)\n      }else{\n        this.dimValueTmpName2.splice(this.dimValueTmpName2.indexOf(data.categoryName),1)\n        this.dimensionTmpName2 = this.uniqueArr(this.dimValueTmpName2)\n        this.dimValueTmp2.splice(this.dimValueTmp2.indexOf(data.id),1)\n        this.dimensionTmp2 = this.uniqueArr(this.dimValueTmp2)\n      }\n      this.dimAndValueObject2.dimensionName = this.dimensionTmpName2.join(',')\n      this.dimAndValueObject2.dimensionValue = this.dimensionTmp2.join(',')\n      this.errmsgDimV2 = this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != null\n          && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '');\n    },\n    handleDimValueClick3(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName3.push(data.categoryName)\n        this.dimensionTmpName3 = this.uniqueArr(this.dimValueTmpName3)\n        this.dimValueTmp3.push(data.id)\n        this.dimensionTmp3 = this.uniqueArr(this.dimValueTmp3)\n      }else{\n        this.dimValueTmpName3.splice(this.dimValueTmpName3.indexOf(data.categoryName),1)\n        this.dimensionTmpName3 = this.uniqueArr(this.dimValueTmpName3)\n        this.dimValueTmp3.splice(this.dimValueTmp3.indexOf(data.id),1)\n        this.dimensionTmp3 = this.uniqueArr(this.dimValueTmp3)\n      }\n      this.dimAndValueObject3.dimensionName = this.dimensionTmpName3.join(',')\n      this.dimAndValueObject3.dimensionValue = this.dimensionTmp3.join(',')\n      this.errmsgDimV3 = this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != null\n          && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '');\n    },\n    handleDimValueClick4(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName4.push(data.categoryName)\n        this.dimensionTmpName4 = this.uniqueArr(this.dimValueTmpName4)\n        this.dimValueTmp4.push(data.id)\n        this.dimensionTmp4 = this.uniqueArr(this.dimValueTmp4)\n      }else{\n        this.dimValueTmpName4.splice(this.dimValueTmpName4.indexOf(data.categoryName),1)\n        this.dimensionTmpName4 = this.uniqueArr(this.dimValueTmpName4)\n        this.dimValueTmp4.splice(this.dimValueTmp4.indexOf(data.id),1)\n        this.dimensionTmp4 = this.uniqueArr(this.dimValueTmp4)\n      }\n      this.dimAndValueObject4.dimensionName = this.dimensionTmpName4.join(',')\n      this.dimAndValueObject4.dimensionValue = this.dimensionTmp4.join(',')\n      this.errmsgDimV4 = this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != null\n          && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '');\n    },\n    handleDimValueClick5(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName5.push(data.categoryName)\n        this.dimensionTmpName5 = this.uniqueArr(this.dimValueTmpName5)\n        this.dimValueTmp5.push(data.id)\n        this.dimensionTmp5 = this.uniqueArr(this.dimValueTmp5)\n      }else{\n        this.dimValueTmpName5.splice(this.dimValueTmpName3.indexOf(data.categoryName),1)\n        this.dimensionTmpName5 = this.uniqueArr(this.dimValueTmpName5)\n        this.dimValueTmp5.splice(this.dimValueTmp5.indexOf(data.id),1)\n        this.dimensionTmp5 = this.uniqueArr(this.dimValueTmp5)\n      }\n      this.dimAndValueObject5.dimensionName = this.dimensionTmpName5.join(',')\n      this.dimAndValueObject5.dimensionValue = this.dimensionTmp5.join(',')\n      this.errmsgDimV5 = this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != null\n          && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '');\n    },\n    handleDimValueClick6(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName6.push(data.categoryName)\n        this.dimensionTmpName6 = this.uniqueArr(this.dimValueTmpName6)\n        this.dimValueTmp6.push(data.id)\n        this.dimensionTmp6 = this.uniqueArr(this.dimValueTmp6)\n      }else{\n        this.dimValueTmpName6.splice(this.dimValueTmpName6.indexOf(data.categoryName),1)\n        this.dimensionTmpName6 = this.uniqueArr(this.dimValueTmpName6)\n        this.dimValueTmp6.splice(this.dimValueTmp6.indexOf(data.id),1)\n        this.dimensionTmp6 = this.uniqueArr(this.dimValueTmp6)\n      }\n      this.dimAndValueObject6.dimensionName = this.dimensionTmpName6.join(',')\n      this.dimAndValueObject6.dimensionValue = this.dimensionTmp6.join(',')\n      this.errmsgDimV6 = this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != null\n          && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '');\n    },\n    handleDimValueClick7(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName7.push(data.categoryName)\n        this.dimensionTmpName7 = this.uniqueArr(this.dimValueTmpName7)\n        this.dimValueTmp7.push(data.id)\n        this.dimensionTmp7 = this.uniqueArr(this.dimValueTmp7)\n      }else{\n        this.dimValueTmpName7.splice(this.dimValueTmpName7.indexOf(data.categoryName),1)\n        this.dimensionTmpName7 = this.uniqueArr(this.dimValueTmpName7)\n        this.dimValueTmp7.splice(this.dimValueTmp7.indexOf(data.id),1)\n        this.dimensionTmp7 = this.uniqueArr(this.dimValueTmp7)\n      }\n      this.dimAndValueObject7.dimensionName = this.dimensionTmpName7.join(',')\n      this.dimAndValueObject7.dimensionValue = this.dimensionTmp7.join(',')\n      this.errmsgDimV7 = this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != null\n          && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '');\n    },\n    handleDimValueClick8(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName8.push(data.categoryName)\n        this.dimensionTmpName8 = this.uniqueArr(this.dimValueTmpName8)\n        this.dimValueTmp8.push(data.id)\n        this.dimensionTmp8 = this.uniqueArr(this.dimValueTmp8)\n      }else{\n        this.dimValueTmpName8.splice(this.dimValueTmpName8.indexOf(data.categoryName),1)\n        this.dimensionTmpName8 = this.uniqueArr(this.dimValueTmpName8)\n        this.dimValueTmp8.splice(this.dimValueTmp8.indexOf(data.id),1)\n        this.dimensionTmp8 = this.uniqueArr(this.dimValueTmp8)\n      }\n      this.dimAndValueObject8.dimensionName = this.dimensionTmpName8.join(',')\n      this.dimAndValueObject8.dimensionValue = this.dimensionTmp8.join(',')\n      this.errmsgDimV8 = this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != null\n          && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '');\n    },\n    handleDimValueClick9(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName9.push(data.categoryName)\n        this.dimensionTmpName9 = this.uniqueArr(this.dimValueTmpName9)\n        this.dimValueTmp9.push(data.id)\n        this.dimensionTmp9 = this.uniqueArr(this.dimValueTmp9)\n      }else{\n        this.dimValueTmpName9.splice(this.dimValueTmpName9.indexOf(data.categoryName),1)\n        this.dimensionTmpName9 = this.uniqueArr(this.dimValueTmpName9)\n        this.dimValueTmp9.splice(this.dimValueTmp9.indexOf(data.id),1)\n        this.dimensionTmp9 = this.uniqueArr(this.dimValueTmp9)\n      }\n      this.dimAndValueObject9.dimensionName = this.dimensionTmpName9.join(',')\n      this.dimAndValueObject9.dimensionValue = this.dimensionTmp9.join(',')\n      this.errmsgDimV9 = this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != null\n          && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '');\n    },\n    handleDimValueClick10(data, selected) {\n      if (selected == true) {\n        this.dimValueTmpName10.push(data.categoryName)\n        this.dimensionTmpName10 = this.uniqueArr(this.dimValueTmpName10)\n        this.dimValueTmp10.push(data.id)\n        this.dimensionTmp10 = this.uniqueArr(this.dimValueTmp10)\n      }else{\n        this.dimValueTmpName10.splice(this.dimValueTmpName10.indexOf(data.categoryName),1)\n        this.dimensionTmpName10 = this.uniqueArr(this.dimValueTmpName10)\n        this.dimValueTmp10.splice(this.dimValueTmp10.indexOf(data.id),1)\n        this.dimensionTmp10 = this.uniqueArr(this.dimValueTmp10)\n      }\n      this.dimAndValueObject10.dimensionName = this.dimensionTmpName10.join(',')\n      this.dimAndValueObject10.dimensionValue = this.dimensionTmp10.join(',')\n      this.errmsgDimV10 = this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != null\n          && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '');\n    },\n    indInnerWarnValueBiggerClick() {\n      this.form.indInnerWarnFlg = '>'\n      this.errmsgInnerWarning = false;\n    },\n    indInnerWarnValueBiggerEqualsClick() {\n      this.form.indInnerWarnFlg = '>='\n      this.errmsgInnerWarning = false;\n    },\n    indInnerWarnValueEqualsClick() {\n      this.form.indInnerWarnFlg = '='\n      this.errmsgInnerWarning = false;\n    },\n    indInnerWarnValueSmallerClick() {\n      this.form.indInnerWarnFlg = '<'\n      this.errmsgInnerWarning = false;\n    },\n    indInnerWarnValueSmallerEqualsClick() {\n      this.form.indInnerWarnFlg = '<='\n      this.errmsgInnerWarning = false;\n    },\n    indInnerWarnValueNotEqualsClick() {\n      this.form.indInnerWarnFlg = '≠'\n      this.errmsgInnerWarning = false;\n    },\n    indMonWarnValueBiggerClick() {\n      this.form.indMonWarnFlg = '>'\n      this.errmsgMonWarning = false;\n    },\n    indMonWarnValueBiggerEqualsClick() {\n      this.form.indMonWarnFlg = '>='\n      this.errmsgMonWarning = false;\n    },\n    indMonWarnValueEqualsClick() {\n      this.form.indMonWarnFlg = '='\n      this.errmsgMonWarning = false;\n    },\n    indMonWarnValueSmallerClick() {\n      this.form.indMonWarnFlg = '<'\n      this.errmsgMonWarning = false;\n    },\n    indMonWarnValueSmallerEqualsClick() {\n      this.form.indMonWarnFlg = '<='\n      this.errmsgMonWarning = false;\n    },\n    indMonWarnValueNotEqualsClick() {\n      this.form.indMonWarnFlg = '≠'\n      this.errmsgMonWarning = false;\n    },\n    //修改按钮弹框\n    modifyInd(data) {\n\n    },\n    async getCategoryName(row) {\n      if (row.indFirstType == null) {\n        return '未知分类'\n      }\n      let res = await crudIndCategory.getCategoryName(row.indFirstType);\n      if(res.code == 0) {\n        return res.data;\n      }\n      return '未知分类';\n      /*.then(res => {\n        if(res.code == 0) {\n          return res.data+\"ccc\";\n        }\n        return '未知分类';\n      })*/\n      //return '未知分类'\n    },\n    getDepts() {\n      getDepts({ enabled: true }).then(res => {\n        this.depts = res.content\n      })\n    },\n    openEdit(row) {\n      let id = row.id;\n      checkRef(id).then(res => {\n        if(res.code == 0) {\n          if (res.data) {\n            this.$notify({\n              title: '该指标已被引用，不能修改！',\n              type: 'error',\n              duration: 2500\n            });\n            return;\n          }\n          this.crud.toEdit(row)\n        }\n      });\n    },\n    delAtom(row) {\n      checkRef(row.id).then(res => {\n        if(res.code == 0) {\n          if(res.data == false) {\n            if(row.indVerifyStatus == \"2\") {\n              this.$notify({\n                title: '审批中的指标不能删除',\n                type: 'error',\n                duration: 2500\n              })\n              return\n            }\n            if(row.indDeployStatus == \"3\") {//已废止\n              this.$alert('已废止指标，不能删除','删除指标');\n              return;\n            }\n            if(row.indDeployStatus == \"1\") {//未发布\n              this.delSingleAtom(row);\n            } else if(row.indDeployStatus == \"2\") {//已发布\n              let msg = '该指标已发布，确认废止? ';\n              let title = '发起废止流程';\n              this.openSignDialog(row,4,title,msg);\n            }\n\n          } else {\n            this.$notify({title: '该指标已被引用，不能删除或废止！',type: 'error',duration: 2500})\n            return;\n          }\n        }else {\n          this.$notify({title: '未知错误！',type: 'error',duration: 2500})\n        }\n      })\n    },\n    delSingleAtom(row) {\n        this.$confirm('请确认是否删除?', '删除指标', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          defaultCrud.delAllLoading = true\n          delAtom(row.id).then(res => {\n            if(res.code == 0) {\n              this.$notify({\n                title: '指标删除成功',\n                type: 'success',\n                duration: 2500\n              })\n            } else {\n              this.$notify({\n                title: '指标删除失败',\n                type: 'error',\n                duration: 2500\n              })\n            }\n            this.crud.refresh();\n          })\n        }).catch(() => {})\n    },\n    abolishSingleAtom(row) {\n      abolish(row.id,row.signDeptIds).then(res => {\n        if(res.code == 0) {\n          this.$notify({\n            title: '发起指标废止流程成功',\n            type: 'success',\n            duration: 2500\n          })\n        } else {\n          this.$notify({\n            title: '发起指标废止流程失败',\n            type: 'error',\n            duration: 2500\n          })\n        }\n        this.crud.refresh();\n      })\n    },\n    submitForm() {\n      this.crud.form.submitType = 1\n      this.crud.submitCU()\n    },\n    submitAndStartProcess() {\n      this.$refs['form'].validate(valid => {\n        if (!valid) {\n          return;\n        }\n        this.crud.form.submitType = 2\n        let title = '';\n        let msg ='';\n        let oprType = 1;\n        if( this.crud.form.formType == 'add') {\n          title = '发起新增审批流程';\n          msg = '请确认是否发起新增审批流程? ';\n          oprType = 1;\n        } else {\n          title = '发起修改审批流程';\n          msg = '请确认是否发起修改审批流程? ';\n          oprType = 2;\n        }\n        this.openSignDialog(this.crud.form,oprType,title,msg);\n      });\n    },\n    endsWithStr(indDefRuleStr) {\n      return indDefRuleStr.trim().endsWith(\"+\") || indDefRuleStr.trim().endsWith(\"-\")\n          || indDefRuleStr.trim().endsWith(\"×\") || indDefRuleStr.trim().endsWith(\"/\");\n    },\n    beginWithStr(indDefRuleStr) {\n      return indDefRuleStr.trim().indexOf(\"+\")==1 || indDefRuleStr.trim().indexOf(\"-\")==1\n          || indDefRuleStr.trim().indexOf(\"×\")==1 || indDefRuleStr.trim().indexOf(\"/\")==1;\n    },\n    clearRuleVal() {\n      this.indDefRuleStr ='';\n      this.indDefRuleVal ='';\n      this.indDefRuleId ='';\n      this.form.indDefRuleStr='';\n      this.form.indDefRuleVal='';\n      this.form.indDefRuleId='';\n      this.form.indDefRule = '';\n      //this.hasCalc = true;\n      this.rules.indDefRule.required = true\n      /*if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\n        if(this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.errmsgIndDefRule = true\n        } else {\n          this.errmsgIndDefRule = false\n        }\n\n      } else {\n        this.errmsgIndDefRule = false\n      }*/\n      this.checkIndDefRule(this.form.indDefRule)\n    },\n    changeIsSelfRule(val){\n      console.log(\"vvvvv=>\" + val)\n      //if(val) {\n        this.form.indDefRule = ''\n        this.indDefRuleStr ='';\n        this.indDefRuleVal ='';\n        this.indDefRuleId ='';\n        this.form.indDefRuleStr='';\n        this.form.indDefRuleVal='';\n        this.form.indDefRuleId='';\n      //}\n    },\n    checkWarning(val,type) {\n      if(type == 'inner') {\n        if(val != null && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n          this.innerwarningErrMsg = '请选择运算符';\n          this.errmsgInnerWarning = true;\n        } else if(val != null && (val.startsWith(\".\") || val =='.')){\n          this.innerwarningErrMsg = '预警值不合法';\n          this.errmsgInnerWarning = true;\n        } else if((val == null || val == '') && (this.form.indInnerWarnFlg != null &&  this.form.indInnerWarnFlg != '')) {\n          this.innerwarningErrMsg = '请输入预警值';\n          this.errmsgInnerWarning = true;\n        } else {\n          this.innerwarningErrMsg = '请选择运算符';\n          this.errmsgInnerWarning = false;\n        }\n\n      } else {\n        if(val != null && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n          this.monwarningErrMsg = '请选择运算符';\n          this.errmsgMonWarning = true;\n        } else if(val != null && val.startsWith(\".\")){\n          this.monwarningErrMsg = '预警值不合法';\n          this.errmsgMonWarning = true;\n        } else if((val == null || val == '')  && (this.form.indMonWarnFlg != null &&  this.form.indMonWarnFlg != '')) {\n          this.monwarningErrMsg = '请输入预警值';\n          this.errmsgMonWarning = true;\n        } else  {\n          this.monwarningErrMsg = '请选择运算符';\n          this.errmsgMonWarning = false;\n        }\n      }\n    },\n    toAddAtomToMyClass() {\n      console.log('myCategoryId ===> ',this.form.categoryId)\n      if(this.form.categoryId == null || this.form.categoryId == 0) {\n        this.crud.notify('请选择分类', CRUD.NOTIFICATION_TYPE.ERROR)\n        return;\n      }\n      const _thisAtom = this.$refs.selectAtom\n      _thisAtom.selectAtomDialog = true\n      _thisAtom.myCategoryId = this.form.categoryId\n\n    },\n    refreshList() {\n      this.crud.refresh();\n    },\n    generatorUUID() {\n      return uuidv4();\n    },\n    getCurrentDept() {\n      getCurrentDept().then(res => {\n        console.log(\"dessss => \" + res)\n        this.form.businessDept = res.id\n      })\n    },\n    handleZoom() {\n      if (this.zoomDirection == 'left') {\n        this.categorySpan = 0;\n        this.tableSpan = 24;\n        this.zoomDirection = 'right';\n      } else {\n        this.categorySpan = 6;\n        this.tableSpan = 18;\n        this.zoomDirection = 'left';\n      }\n    }\n  }\n}\n",null]}